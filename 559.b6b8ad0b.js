"use strict";(self["webpackChunkfarmland_drone_dashboard"]=self["webpackChunkfarmland_drone_dashboard"]||[]).push([[559],{6559:function(e,r,o){o.r(r),o.d(r,{default:function(){return L}});var s=o(6768),a=o(5130),t=o(4232);const l={class:"login-page"},i={class:"login-container"},m={class:"form-group"},n={key:0,class:"error"},d={class:"form-group"},c={key:0,class:"error"},u={class:"form-options"},f={class:"remember-me"},p=["disabled"],h={class:"register-link"};function g(e,r,o,g,k,b){const v=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",i,[r[8]||(r[8]=(0,s.Lk)("h1",null,"登录",-1)),(0,s.Lk)("form",{onSubmit:r[3]||(r[3]=(0,a.D$)((...e)=>b.handleLogin&&b.handleLogin(...e),["prevent"])),class:"login-form"},[(0,s.Lk)("div",m,[(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":r[0]||(r[0]=e=>k.form.email=e),placeholder:"请输入邮箱",class:"form-input",required:""},null,512),[[a.Jo,k.form.email]]),k.errors.email?((0,s.uX)(),(0,s.CE)("span",n,(0,t.v_)(k.errors.email),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",d,[(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":r[1]||(r[1]=e=>k.form.password=e),placeholder:"请输入密码",class:"form-input",required:""},null,512),[[a.Jo,k.form.password]]),k.errors.password?((0,s.uX)(),(0,s.CE)("span",c,(0,t.v_)(k.errors.password),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",u,[(0,s.Lk)("label",f,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":r[2]||(r[2]=e=>k.form.rememberMe=e)},null,512),[[a.lH,k.form.rememberMe]]),r[4]||(r[4]=(0,s.Lk)("span",null,"记住我",-1))]),r[5]||(r[5]=(0,s.Lk)("a",{href:"#",class:"forgot-password"},"忘记密码？",-1))]),(0,s.Lk)("button",{type:"submit",class:"login-btn",disabled:k.loading},(0,t.v_)(k.loading?"登录中...":"登录"),9,p),(0,s.Lk)("div",h,[r[7]||(r[7]=(0,s.eW)(" 还没有账号？",-1)),(0,s.bF)(v,{to:"/register"},{default:(0,s.k6)(()=>[...r[6]||(r[6]=[(0,s.eW)("立即注册",-1)])]),_:1})])],32)])])}o(4114);var k={name:"LoginPage",data(){return{form:{email:"",password:"",rememberMe:!1},errors:{},loading:!1}},mounted(){if("true"===localStorage.getItem("rememberMe")){const e=localStorage.getItem("savedEmail");e&&(this.form.email=e,this.form.rememberMe=!0)}},methods:{validateForm(){this.errors={};const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.form.email?e.test(this.form.email)||(this.errors.email="请输入有效的邮箱地址"):this.errors.email="邮箱不能为空",this.form.password||(this.errors.password="密码不能为空"),0===Object.keys(this.errors).length},async handleLogin(){if(this.validateForm()){this.loading=!0;try{console.log("登录请求:",this.form),await new Promise(e=>setTimeout(e,1e3));const e={data:{token:"mock-jwt-token",user:{id:1,email:this.form.email,username:this.form.email.split("@")[0]}}};alert("登录成功！"),localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),this.form.rememberMe?(localStorage.setItem("rememberMe","true"),localStorage.setItem("savedEmail",this.form.email)):(localStorage.removeItem("rememberMe"),localStorage.removeItem("savedEmail"));const r=this.$route.query.redirect||"/";this.$router.push(r)}catch(e){console.error("登录错误:",e);const r=e.response?.data?.message||"登录失败，请检查邮箱和密码";alert(r)}finally{this.loading=!1}}}}},b=o(1241);const v=(0,b.A)(k,[["render",g],["__scopeId","data-v-49fda554"]]);var L=v}}]);
//# sourceMappingURL=559.b6b8ad0b.js.map