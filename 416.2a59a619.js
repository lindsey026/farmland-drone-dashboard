"use strict";(self["webpackChunkfarmland_drone_dashboard"]=self["webpackChunkfarmland_drone_dashboard"]||[]).push([[416],{1416:function(e,s,a){a.r(s),a.d(s,{default:function(){return ts}});var t=a(6768),l=a(5130),i=a(4232);const n={class:"task-management-container"},d={class:"task-management-content"},o={class:"toolbar"},c={class:"search-filter"},k={class:"stats-cards"},r={class:"stat-card"},u={class:"stat-content"},p={class:"stat-number"},v={class:"stat-card"},L={class:"stat-content"},m={class:"stat-number"},T={class:"stat-card"},h={class:"stat-content"},b={class:"stat-number"},f={class:"stat-card"},y={class:"stat-content"},g={class:"stat-number"},C={class:"task-list-section"},x={class:"task-table-container"},w={class:"task-table"},_={class:"task-name"},A={class:"task-actions"},E=["onClick"],D=["onClick"],F=["onClick"],Q=["onClick"],X=["onClick"],I={key:0,class:"empty-state"},M={key:0,class:"modal"},N={class:"modal-content"},U={class:"modal-header"},V={class:"modal-body"},P={class:"form-group"},R={class:"form-row"},S={class:"form-group"},H={class:"form-group"},J=["value"],B={class:"form-row"},q={class:"form-group"},$={class:"form-group"},K={class:"form-group"},O={class:"params-container"},W={key:0,class:"param-item"},z={key:1,class:"param-item"},j={key:2,class:"param-item"},G={key:3,class:"param-item"},Y={key:4,class:"param-item"},Z={class:"form-group"},ee={class:"form-group"},se={class:"checkbox-label"},ae={class:"form-actions"},te={key:1,class:"modal"},le={class:"modal-content large"},ie={class:"modal-header"},ne={class:"modal-body"},de={class:"task-details-content"},oe={class:"detail-section"},ce={class:"detail-grid"},ke={class:"detail-item"},re={class:"detail-item"},ue={class:"detail-item"},pe={class:"detail-item"},ve={class:"detail-item"},Le={class:"detail-item"},me={class:"detail-item"},Te={class:"detail-item"},he={class:"detail-item full-width"},be={class:"detail-section"},fe={class:"task-params"},ye={key:0,class:"param-detail"},ge={class:"param-value"},Ce={key:1,class:"param-detail"},xe={class:"param-value"},we={key:2,class:"param-detail"},_e={class:"param-value"},Ae={key:3,class:"param-detail"},Ee={class:"param-value"},De={key:4,class:"param-detail"},Fe={class:"param-value"},Qe={key:5,class:"no-params"},Xe={key:0,class:"detail-section"},Ie={class:"execution-details"},Me={class:"execution-item"},Ne={class:"execution-value"},Ue={class:"execution-item"},Ve={class:"execution-value"},Pe={class:"execution-item"},Re={class:"execution-value"},Se={class:"execution-item"},He={class:"execution-value"},Je={class:"progress-bar"},Be={class:"progress-text"},qe={key:1,class:"detail-section"},$e={class:"execution-report"},Ke={class:"report-item"},Oe={class:"report-item full-width"},We={class:"report-actions"},ze={key:2,class:"detail-section"},je={class:"error-info"},Ge={class:"error-item"},Ye={class:"error-item full-width"};function Ze(e,s,a,Ze,es,ss){return(0,t.uX)(),(0,t.CE)("div",n,[s[88]||(s[88]=(0,t.Lk)("div",{class:"page-header"},[(0,t.Lk)("h1",null,"任务管理"),(0,t.Lk)("p",null,"智能调度无人机作业任务，高效管理农业生产流程")],-1)),(0,t.Lk)("div",d,[(0,t.Lk)("div",o,[(0,t.Lk)("div",c,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>es.searchQuery=e),placeholder:"搜索任务名称或农田...",class:"search-input"},null,512),[[l.Jo,es.searchQuery]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>es.statusFilter=e),class:"filter-select"},[...s[24]||(s[24]=[(0,t.Fv)('<option value="" data-v-32b4fd00>全部状态</option><option value="待执行" data-v-32b4fd00>待执行</option><option value="执行中" data-v-32b4fd00>执行中</option><option value="已完成" data-v-32b4fd00>已完成</option><option value="已取消" data-v-32b4fd00>已取消</option><option value="失败" data-v-32b4fd00>失败</option>',6)])],512),[[l.u1,es.statusFilter]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>es.typeFilter=e),class:"filter-select"},[...s[25]||(s[25]=[(0,t.Fv)('<option value="" data-v-32b4fd00>全部类型</option><option value="作物监测" data-v-32b4fd00>作物监测</option><option value="农药喷洒" data-v-32b4fd00>农药喷洒</option><option value="播种作业" data-v-32b4fd00>播种作业</option><option value="施肥作业" data-v-32b4fd00>施肥作业</option><option value="灌溉监测" data-v-32b4fd00>灌溉监测</option>',6)])],512),[[l.u1,es.typeFilter]])]),(0,t.Lk)("button",{class:"btn-create-task",onClick:s[3]||(s[3]=e=>es.showCreateTaskModal=!0)},[...s[26]||(s[26]=[(0,t.Lk)("i",{class:"fa fa-plus"},null,-1),(0,t.eW)(" 创建新任务 ",-1)])])]),(0,t.Lk)("div",k,[(0,t.Lk)("div",r,[s[28]||(s[28]=(0,t.Lk)("div",{class:"stat-icon total-icon"},[(0,t.Lk)("i",{class:"fa fa-tasks"})],-1)),(0,t.Lk)("div",u,[(0,t.Lk)("div",p,(0,i.v_)(es.tasks.length),1),s[27]||(s[27]=(0,t.Lk)("div",{class:"stat-label"},"总任务数",-1))])]),(0,t.Lk)("div",v,[s[30]||(s[30]=(0,t.Lk)("div",{class:"stat-icon pending-icon"},[(0,t.Lk)("i",{class:"fa fa-clock-o"})],-1)),(0,t.Lk)("div",L,[(0,t.Lk)("div",m,(0,i.v_)(ss.pendingTasks),1),s[29]||(s[29]=(0,t.Lk)("div",{class:"stat-label"},"待执行",-1))])]),(0,t.Lk)("div",T,[s[32]||(s[32]=(0,t.Lk)("div",{class:"stat-icon active-icon"},[(0,t.Lk)("i",{class:"fa fa-play-circle"})],-1)),(0,t.Lk)("div",h,[(0,t.Lk)("div",b,(0,i.v_)(ss.activeTasks),1),s[31]||(s[31]=(0,t.Lk)("div",{class:"stat-label"},"执行中",-1))])]),(0,t.Lk)("div",f,[s[34]||(s[34]=(0,t.Lk)("div",{class:"stat-icon completed-icon"},[(0,t.Lk)("i",{class:"fa fa-check-circle"})],-1)),(0,t.Lk)("div",y,[(0,t.Lk)("div",g,(0,i.v_)(ss.completedTasks),1),s[33]||(s[33]=(0,t.Lk)("div",{class:"stat-label"},"已完成",-1))])])]),(0,t.Lk)("div",C,[s[42]||(s[42]=(0,t.Lk)("h2",null,"任务列表",-1)),(0,t.Lk)("div",x,[(0,t.Lk)("table",w,[s[40]||(s[40]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"任务名称"),(0,t.Lk)("th",null,"任务类型"),(0,t.Lk)("th",null,"目标农田"),(0,t.Lk)("th",null,"计划时间"),(0,t.Lk)("th",null,"执行时间"),(0,t.Lk)("th",null,"执行人"),(0,t.Lk)("th",null,"状态"),(0,t.Lk)("th",null,"操作")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ss.filteredTasks,e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id,class:(0,i.C4)({"task-urgent":e.urgent})},[(0,t.Lk)("td",_,(0,i.v_)(e.name),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,i.C4)(["task-type-tag",ss.getTaskTypeClass(e.type)])},(0,i.v_)(e.type),3)]),(0,t.Lk)("td",null,(0,i.v_)(e.fieldName),1),(0,t.Lk)("td",null,(0,i.v_)(e.scheduledTime),1),(0,t.Lk)("td",null,(0,i.v_)(e.executionTime||"-"),1),(0,t.Lk)("td",null,(0,i.v_)(e.executor||"自动"),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,i.C4)(["task-status-badge",ss.getStatusClass(e.status)])},(0,i.v_)(e.status),3)]),(0,t.Lk)("td",null,[(0,t.Lk)("div",A,[(0,t.Lk)("button",{class:"btn-details",onClick:s=>ss.viewTaskDetails(e)},[...s[35]||(s[35]=[(0,t.Lk)("i",{class:"fa fa-eye"},null,-1)])],8,E),"待执行"===e.status?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"btn-edit",onClick:s=>ss.editTask(e)},[...s[36]||(s[36]=[(0,t.Lk)("i",{class:"fa fa-pencil"},null,-1)])],8,D)):(0,t.Q3)("",!0),"待执行"===e.status||"执行中"===e.status?((0,t.uX)(),(0,t.CE)("button",{key:1,class:"btn-cancel",onClick:s=>ss.cancelTask(e.id)},[...s[37]||(s[37]=[(0,t.Lk)("i",{class:"fa fa-times-circle"},null,-1)])],8,F)):(0,t.Q3)("",!0),"待执行"===e.status?((0,t.uX)(),(0,t.CE)("button",{key:2,class:"btn-start",onClick:s=>ss.startTask(e.id)},[...s[38]||(s[38]=[(0,t.Lk)("i",{class:"fa fa-play"},null,-1)])],8,Q)):(0,t.Q3)("",!0),"已完成"===e.status||"已取消"===e.status||"失败"===e.status?((0,t.uX)(),(0,t.CE)("button",{key:3,class:"btn-delete",onClick:s=>ss.deleteTask(e.id)},[...s[39]||(s[39]=[(0,t.Lk)("i",{class:"fa fa-trash"},null,-1)])],8,X)):(0,t.Q3)("",!0)])])],2))),128))])]),0===ss.filteredTasks.length?((0,t.uX)(),(0,t.CE)("div",I,[...s[41]||(s[41]=[(0,t.Lk)("i",{class:"fa fa-tasks"},null,-1),(0,t.Lk)("p",null,"没有找到符合条件的任务",-1)])])):(0,t.Q3)("",!0)])])]),es.showCreateTaskModal||es.showEditTaskModal?((0,t.uX)(),(0,t.CE)("div",M,[(0,t.Lk)("div",N,[(0,t.Lk)("div",U,[(0,t.Lk)("h3",null,(0,i.v_)(es.showCreateTaskModal?"创建新任务":"编辑任务"),1),(0,t.Lk)("button",{class:"close-btn",onClick:s[4]||(s[4]=(...e)=>ss.closeModal&&ss.closeModal(...e))},"×")]),(0,t.Lk)("div",V,[(0,t.Lk)("form",{onSubmit:s[19]||(s[19]=(0,l.D$)((...e)=>ss.saveTask&&ss.saveTask(...e),["prevent"]))},[(0,t.Lk)("div",P,[s[43]||(s[43]=(0,t.Lk)("label",null,"任务名称 *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=e=>es.currentTask.name=e),required:"",placeholder:"请输入任务名称"},null,512),[[l.Jo,es.currentTask.name]])]),(0,t.Lk)("div",R,[(0,t.Lk)("div",S,[s[45]||(s[45]=(0,t.Lk)("label",null,"任务类型 *",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":s[6]||(s[6]=e=>es.currentTask.type=e),required:""},[...s[44]||(s[44]=[(0,t.Fv)('<option value="" data-v-32b4fd00>请选择任务类型</option><option value="作物监测" data-v-32b4fd00>作物监测</option><option value="农药喷洒" data-v-32b4fd00>农药喷洒</option><option value="播种作业" data-v-32b4fd00>播种作业</option><option value="施肥作业" data-v-32b4fd00>施肥作业</option><option value="灌溉监测" data-v-32b4fd00>灌溉监测</option>',6)])],512),[[l.u1,es.currentTask.type]])]),(0,t.Lk)("div",H,[s[47]||(s[47]=(0,t.Lk)("label",null,"目标农田 *",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":s[7]||(s[7]=e=>es.currentTask.fieldId=e),required:"",onChange:s[8]||(s[8]=(...e)=>ss.updateFieldName&&ss.updateFieldName(...e))},[s[46]||(s[46]=(0,t.Lk)("option",{value:""},"请选择农田",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(es.availableFields,e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,i.v_)(e.name),9,J))),128))],544),[[l.u1,es.currentTask.fieldId]])])]),(0,t.Lk)("div",B,[(0,t.Lk)("div",q,[s[48]||(s[48]=(0,t.Lk)("label",null,"计划执行时间 *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"datetime-local","onUpdate:modelValue":s[9]||(s[9]=e=>es.currentTask.scheduledTime=e),required:""},null,512),[[l.Jo,es.currentTask.scheduledTime]])]),(0,t.Lk)("div",$,[s[50]||(s[50]=(0,t.Lk)("label",null,"执行人",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":s[10]||(s[10]=e=>es.currentTask.executor=e)},[...s[49]||(s[49]=[(0,t.Lk)("option",{value:""},"自动分配",-1),(0,t.Lk)("option",{value:"操作员A"},"操作员A",-1),(0,t.Lk)("option",{value:"操作员B"},"操作员B",-1),(0,t.Lk)("option",{value:"操作员C"},"操作员C",-1)])],512),[[l.u1,es.currentTask.executor]])])]),(0,t.Lk)("div",K,[s[56]||(s[56]=(0,t.Lk)("label",null,"任务参数",-1)),(0,t.Lk)("div",O,["农药喷洒"===es.currentTask.type?((0,t.uX)(),(0,t.CE)("div",W,[s[51]||(s[51]=(0,t.Lk)("label",null,"农药类型:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":s[11]||(s[11]=e=>es.currentTask.pesticideType=e),placeholder:"请输入农药类型"},null,512),[[l.Jo,es.currentTask.pesticideType]])])):(0,t.Q3)("",!0),"农药喷洒"===es.currentTask.type||"施肥作业"===es.currentTask.type?((0,t.uX)(),(0,t.CE)("div",z,[s[52]||(s[52]=(0,t.Lk)("label",null,"用量(kg/亩):",-1)),(0,t.bo)((0,t.Lk)("input",{type:"number","onUpdate:modelValue":s[12]||(s[12]=e=>es.currentTask.usagePerAcre=e),min:"0",step:"0.1"},null,512),[[l.Jo,es.currentTask.usagePerAcre,void 0,{number:!0}]])])):(0,t.Q3)("",!0),"作物监测"===es.currentTask.type?((0,t.uX)(),(0,t.CE)("div",j,[s[53]||(s[53]=(0,t.Lk)("label",null,"监测高度(m):",-1)),(0,t.bo)((0,t.Lk)("input",{type:"number","onUpdate:modelValue":s[13]||(s[13]=e=>es.currentTask.monitorHeight=e),min:"1",step:"1"},null,512),[[l.Jo,es.currentTask.monitorHeight,void 0,{number:!0}]])])):(0,t.Q3)("",!0),"播种作业"===es.currentTask.type?((0,t.uX)(),(0,t.CE)("div",G,[s[54]||(s[54]=(0,t.Lk)("label",null,"种子类型:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":s[14]||(s[14]=e=>es.currentTask.seedType=e),placeholder:"请输入种子类型"},null,512),[[l.Jo,es.currentTask.seedType]])])):(0,t.Q3)("",!0),"播种作业"===es.currentTask.type?((0,t.uX)(),(0,t.CE)("div",Y,[s[55]||(s[55]=(0,t.Lk)("label",null,"播种密度(株/亩):",-1)),(0,t.bo)((0,t.Lk)("input",{type:"number","onUpdate:modelValue":s[15]||(s[15]=e=>es.currentTask.seedDensity=e),min:"1"},null,512),[[l.Jo,es.currentTask.seedDensity,void 0,{number:!0}]])])):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",Z,[s[57]||(s[57]=(0,t.Lk)("label",null,"任务描述",-1)),(0,t.bo)((0,t.Lk)("textarea",{"onUpdate:modelValue":s[16]||(s[16]=e=>es.currentTask.description=e),rows:"3",placeholder:"请输入任务详细描述"},null,512),[[l.Jo,es.currentTask.description]])]),(0,t.Lk)("div",ee,[(0,t.Lk)("label",se,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":s[17]||(s[17]=e=>es.currentTask.urgent=e)},null,512),[[l.lH,es.currentTask.urgent]]),s[58]||(s[58]=(0,t.eW)(" 紧急任务 ",-1))])]),(0,t.Lk)("div",ae,[(0,t.Lk)("button",{type:"button",class:"btn-cancel",onClick:s[18]||(s[18]=(...e)=>ss.closeModal&&ss.closeModal(...e))},"取消"),s[59]||(s[59]=(0,t.Lk)("button",{type:"submit",class:"btn-save"},"保存",-1))])],32)])])])):(0,t.Q3)("",!0),es.showTaskDetails?((0,t.uX)(),(0,t.CE)("div",te,[(0,t.Lk)("div",le,[(0,t.Lk)("div",ie,[(0,t.Lk)("h3",null,(0,i.v_)(es.selectedTask.name)+" - 任务详情",1),(0,t.Lk)("button",{class:"close-btn",onClick:s[20]||(s[20]=e=>es.showTaskDetails=!1)},"×")]),(0,t.Lk)("div",ne,[(0,t.Lk)("div",de,[(0,t.Lk)("div",oe,[s[69]||(s[69]=(0,t.Lk)("h4",null,"基本信息",-1)),(0,t.Lk)("div",ce,[(0,t.Lk)("div",ke,[s[60]||(s[60]=(0,t.Lk)("label",null,"任务名称",-1)),(0,t.Lk)("span",null,(0,i.v_)(es.selectedTask.name),1)]),(0,t.Lk)("div",re,[s[61]||(s[61]=(0,t.Lk)("label",null,"任务类型",-1)),(0,t.Lk)("span",{class:(0,i.C4)(["task-type-tag",ss.getTaskTypeClass(es.selectedTask.type)])},(0,i.v_)(es.selectedTask.type),3)]),(0,t.Lk)("div",ue,[s[62]||(s[62]=(0,t.Lk)("label",null,"目标农田",-1)),(0,t.Lk)("span",null,(0,i.v_)(es.selectedTask.fieldName),1)]),(0,t.Lk)("div",pe,[s[63]||(s[63]=(0,t.Lk)("label",null,"计划时间",-1)),(0,t.Lk)("span",null,(0,i.v_)(es.selectedTask.scheduledTime),1)]),(0,t.Lk)("div",ve,[s[64]||(s[64]=(0,t.Lk)("label",null,"执行时间",-1)),(0,t.Lk)("span",null,(0,i.v_)(es.selectedTask.executionTime||"未执行"),1)]),(0,t.Lk)("div",Le,[s[65]||(s[65]=(0,t.Lk)("label",null,"执行人",-1)),(0,t.Lk)("span",null,(0,i.v_)(es.selectedTask.executor||"自动"),1)]),(0,t.Lk)("div",me,[s[66]||(s[66]=(0,t.Lk)("label",null,"任务状态",-1)),(0,t.Lk)("span",{class:(0,i.C4)(["task-status-badge",ss.getStatusClass(es.selectedTask.status)])},(0,i.v_)(es.selectedTask.status),3)]),(0,t.Lk)("div",Te,[s[67]||(s[67]=(0,t.Lk)("label",null,"创建时间",-1)),(0,t.Lk)("span",null,(0,i.v_)(es.selectedTask.createdAt),1)])]),(0,t.Lk)("div",he,[s[68]||(s[68]=(0,t.Lk)("label",null,"任务描述",-1)),(0,t.Lk)("p",null,(0,i.v_)(es.selectedTask.description||"无"),1)])]),(0,t.Lk)("div",be,[s[75]||(s[75]=(0,t.Lk)("h4",null,"任务参数",-1)),(0,t.Lk)("div",fe,[es.selectedTask.pesticideType?((0,t.uX)(),(0,t.CE)("div",ye,[s[70]||(s[70]=(0,t.Lk)("span",{class:"param-label"},"农药类型:",-1)),(0,t.Lk)("span",ge,(0,i.v_)(es.selectedTask.pesticideType),1)])):(0,t.Q3)("",!0),es.selectedTask.usagePerAcre?((0,t.uX)(),(0,t.CE)("div",Ce,[s[71]||(s[71]=(0,t.Lk)("span",{class:"param-label"},"用量:",-1)),(0,t.Lk)("span",xe,(0,i.v_)(es.selectedTask.usagePerAcre)+" kg/亩",1)])):(0,t.Q3)("",!0),es.selectedTask.monitorHeight?((0,t.uX)(),(0,t.CE)("div",we,[s[72]||(s[72]=(0,t.Lk)("span",{class:"param-label"},"监测高度:",-1)),(0,t.Lk)("span",_e,(0,i.v_)(es.selectedTask.monitorHeight)+" m",1)])):(0,t.Q3)("",!0),es.selectedTask.seedType?((0,t.uX)(),(0,t.CE)("div",Ae,[s[73]||(s[73]=(0,t.Lk)("span",{class:"param-label"},"种子类型:",-1)),(0,t.Lk)("span",Ee,(0,i.v_)(es.selectedTask.seedType),1)])):(0,t.Q3)("",!0),es.selectedTask.seedDensity?((0,t.uX)(),(0,t.CE)("div",De,[s[74]||(s[74]=(0,t.Lk)("span",{class:"param-label"},"播种密度:",-1)),(0,t.Lk)("span",Fe,(0,i.v_)(es.selectedTask.seedDensity)+" 株/亩",1)])):(0,t.Q3)("",!0),ss.hasAnyParams()?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",Qe," 暂无特定参数 "))])]),"已完成"===es.selectedTask.status||"执行中"===es.selectedTask.status?((0,t.uX)(),(0,t.CE)("div",Xe,[s[80]||(s[80]=(0,t.Lk)("h4",null,"执行详情",-1)),(0,t.Lk)("div",Ie,[(0,t.Lk)("div",Me,[s[76]||(s[76]=(0,t.Lk)("div",{class:"execution-label"},"执行无人机",-1)),(0,t.Lk)("div",Ne,(0,i.v_)(es.selectedTask.droneId||"N/A"),1)]),(0,t.Lk)("div",Ue,[s[77]||(s[77]=(0,t.Lk)("div",{class:"execution-label"},"执行时长",-1)),(0,t.Lk)("div",Ve,(0,i.v_)(es.selectedTask.executionDuration||"计算中..."),1)]),(0,t.Lk)("div",Pe,[s[78]||(s[78]=(0,t.Lk)("div",{class:"execution-label"},"覆盖面积",-1)),(0,t.Lk)("div",Re,(0,i.v_)(es.selectedTask.coveredArea||"0")+" 亩",1)]),(0,t.Lk)("div",Se,[s[79]||(s[79]=(0,t.Lk)("div",{class:"execution-label"},"任务进度",-1)),(0,t.Lk)("div",He,[(0,t.Lk)("div",Je,[(0,t.Lk)("div",{class:"progress-fill",style:(0,i.Tr)({width:es.selectedTask.progress+"%",backgroundColor:ss.getProgressColor(es.selectedTask.progress)})},null,4)]),(0,t.Lk)("span",Be,(0,i.v_)(es.selectedTask.progress)+"%",1)])])])])):(0,t.Q3)("",!0),"已完成"===es.selectedTask.status?((0,t.uX)(),(0,t.CE)("div",qe,[s[84]||(s[84]=(0,t.Lk)("h4",null,"执行报告",-1)),(0,t.Lk)("div",$e,[(0,t.Lk)("div",Ke,[s[81]||(s[81]=(0,t.Lk)("label",null,"完成时间",-1)),(0,t.Lk)("span",null,(0,i.v_)(es.selectedTask.completionTime),1)]),s[83]||(s[83]=(0,t.Lk)("div",{class:"report-item"},[(0,t.Lk)("label",null,"执行结果"),(0,t.Lk)("span",{class:"result-badge success"},"成功")],-1)),(0,t.Lk)("div",Oe,[s[82]||(s[82]=(0,t.Lk)("label",null,"执行总结",-1)),(0,t.Lk)("p",null,(0,i.v_)(es.selectedTask.executionSummary||"无总结报告"),1)]),(0,t.Lk)("div",We,[(0,t.Lk)("button",{class:"btn-view-report",onClick:s[21]||(s[21]=(...e)=>ss.viewFullReport&&ss.viewFullReport(...e))},"查看完整报告"),(0,t.Lk)("button",{class:"btn-download-report",onClick:s[22]||(s[22]=(...e)=>ss.downloadReport&&ss.downloadReport(...e))},"下载报告")])])])):(0,t.Q3)("",!0),"失败"===es.selectedTask.status?((0,t.uX)(),(0,t.CE)("div",ze,[s[87]||(s[87]=(0,t.Lk)("h4",null,"失败信息",-1)),(0,t.Lk)("div",je,[(0,t.Lk)("div",Ge,[s[85]||(s[85]=(0,t.Lk)("label",null,"失败时间",-1)),(0,t.Lk)("span",null,(0,i.v_)(es.selectedTask.failureTime),1)]),(0,t.Lk)("div",Ye,[s[86]||(s[86]=(0,t.Lk)("label",null,"失败原因",-1)),(0,t.Lk)("p",null,(0,i.v_)(es.selectedTask.failureReason||"未知原因"),1)]),(0,t.Lk)("button",{class:"btn-retry",onClick:s[23]||(s[23]=(...e)=>ss.retryTask&&ss.retryTask(...e))},"重试任务")])])):(0,t.Q3)("",!0)])])])])):(0,t.Q3)("",!0)])}a(4114),a(8111),a(2489),a(116);var es={name:"DroneTaskManagement",data(){return{tasks:[],availableFields:[],searchQuery:"",statusFilter:"",typeFilter:"",showCreateTaskModal:!1,showEditTaskModal:!1,showTaskDetails:!1,currentTask:{id:null,name:"",type:"",fieldId:"",fieldName:"",scheduledTime:"",executionTime:null,executor:"",status:"待执行",description:"",urgent:!1,pesticideType:"",usagePerAcre:0,monitorHeight:0,seedType:"",seedDensity:0},selectedTask:{}}},computed:{filteredTasks(){return this.tasks.filter(e=>{const s=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.fieldName.toLowerCase().includes(this.searchQuery.toLowerCase()),a=!this.statusFilter||e.status===this.statusFilter,t=!this.typeFilter||e.type===this.typeFilter;return s&&a&&t})},pendingTasks(){return this.tasks.filter(e=>"待执行"===e.status).length},activeTasks(){return this.tasks.filter(e=>"执行中"===e.status).length},completedTasks(){return this.tasks.filter(e=>"已完成"===e.status).length}},mounted(){this.loadTasks(),this.loadFields()},methods:{loadTasks(){this.tasks=[{id:1,name:"A区作物监测任务",type:"作物监测",fieldId:1,fieldName:"试验田A区",scheduledTime:"2023-10-01T14:30:00",executionTime:"2023-10-01T14:30:00",executor:"操作员A",status:"已完成",urgent:!1,monitorHeight:30,createdAt:"2023-09-30",completionTime:"2023-10-01T15:45:00",executionDuration:"1小时15分钟",coveredArea:50,progress:100,executionSummary:"作物生长状况良好，无病虫害迹象，建议正常灌溉。",droneId:"DR-001"},{id:2,name:"B区农药喷洒任务",type:"农药喷洒",fieldId:2,fieldName:"试验田B区",scheduledTime:"2024-01-20T09:00:00",executionTime:null,executor:"",status:"待执行",urgent:!0,pesticideType:"广谱杀虫剂",usagePerAcre:.5,createdAt:"2024-01-18",progress:0},{id:3,name:"C区施肥作业",type:"施肥作业",fieldId:3,fieldName:"试验田C区",scheduledTime:"2024-01-19T10:00:00",executionTime:"2024-01-19T10:05:00",executor:"操作员B",status:"执行中",urgent:!1,usagePerAcre:2.5,createdAt:"2024-01-18",executionDuration:"45分钟",coveredArea:30,progress:67,droneId:"DR-002"},{id:4,name:"D区灌溉监测",type:"灌溉监测",fieldId:4,fieldName:"示范田D区",scheduledTime:"2024-01-18T15:00:00",executionTime:"2024-01-18T15:00:00",executor:"",status:"失败",urgent:!1,createdAt:"2024-01-18",failureTime:"2024-01-18T15:15:00",failureReason:"无人机传感器故障，无法获取准确数据"},{id:5,name:"A区播种作业",type:"播种作业",fieldId:1,fieldName:"试验田A区",scheduledTime:"2024-01-22T13:30:00",executionTime:null,executor:"操作员C",status:"待执行",urgent:!1,seedType:"优质水稻种子",seedDensity:3e4,createdAt:"2024-01-19",progress:0}]},loadFields(){this.availableFields=[{id:1,name:"试验田A区"},{id:2,name:"试验田B区"},{id:3,name:"试验田C区"},{id:4,name:"示范田D区"}]},updateFieldName(){const e=this.availableFields.find(e=>e.id===parseInt(this.currentTask.fieldId));e&&(this.currentTask.fieldName=e.name)},viewTaskDetails(e){this.selectedTask={...e},this.showTaskDetails=!0},editTask(e){this.currentTask={...e},this.showEditTaskModal=!0},saveTask(){const e=(new Date).toISOString().split("T")[0];if(this.showCreateTaskModal){const s={...this.currentTask,id:Date.now(),status:"待执行",createdAt:e,progress:0};this.tasks.push(s),alert("任务创建成功")}else if(this.showEditTaskModal){const e=this.tasks.findIndex(e=>e.id===this.currentTask.id);e>-1&&(this.tasks[e]={...this.tasks[e],...this.currentTask},alert("任务更新成功"))}this.closeModal()},closeModal(){this.showCreateTaskModal=!1,this.showEditTaskModal=!1,this.resetCurrentTask()},resetCurrentTask(){this.currentTask={id:null,name:"",type:"",fieldId:"",fieldName:"",scheduledTime:"",executor:"",description:"",urgent:!1,pesticideType:"",usagePerAcre:0,monitorHeight:0,seedType:"",seedDensity:0}},startTask(e){if(confirm("确定要开始执行该任务吗？")){const s=this.tasks.findIndex(s=>s.id===e);s>-1&&(this.tasks[s].status="执行中",this.tasks[s].executionTime=(new Date).toISOString(),this.tasks[s].executor=this.tasks[s].executor||"系统自动",alert("任务已开始执行"))}},cancelTask(e){if(confirm("确定要取消该任务吗？")){const s=this.tasks.findIndex(s=>s.id===e);s>-1&&(this.tasks[s].status="已取消",alert("任务已取消"))}},deleteTask(e){if(confirm("确定要删除该任务吗？")){const s=this.tasks.findIndex(s=>s.id===e);s>-1&&(this.tasks.splice(s,1),alert("任务已删除"))}},retryTask(){if(confirm("确定要重试该任务吗？")){const e=this.tasks.findIndex(e=>e.id===this.selectedTask.id);e>-1&&(this.tasks[e].status="待执行",this.tasks[e].failureTime=null,this.tasks[e].failureReason=null,this.showTaskDetails=!1,alert("任务已重置为待执行状态"))}},viewFullReport(){alert(`查看${this.selectedTask.name}的完整执行报告`)},downloadReport(){alert(`下载${this.selectedTask.name}的执行报告`)},getTaskTypeClass(e){const s={"作物监测":"type-monitor","农药喷洒":"type-spray","播种作业":"type-seed","施肥作业":"type-fertilize","灌溉监测":"type-irrigation"};return s[e]||"type-other"},getStatusClass(e){const s={"待执行":"status-pending","执行中":"status-active","已完成":"status-completed","已取消":"status-canceled","失败":"status-failed"};return s[e]||""},getProgressColor(e){return 100===e?"#28a745":e>50?"#17a2b8":e>0?"#ffc107":"#6c757d"},hasAnyParams(){return this.selectedTask.pesticideType||this.selectedTask.usagePerAcre||this.selectedTask.monitorHeight||this.selectedTask.seedType||this.selectedTask.seedDensity}}},ss=a(1241);const as=(0,ss.A)(es,[["render",Ze],["__scopeId","data-v-32b4fd00"]]);var ts=as}}]);
//# sourceMappingURL=416.2a59a619.js.map