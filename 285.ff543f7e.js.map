{"version":3,"file":"js/285.ff543f7e.js","mappings":"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","sources":["webpack://farmland-drone-dashboard/./src/components/DashboardMap.vue","webpack://farmland-drone-dashboard/./src/services/AIRoutePlanningService.js","webpack://farmland-drone-dashboard/./src/components/DashboardMap.vue?b25f"],"sourcesContent":["<template>\n  <div class=\"dashboard-map-container\">\n    <!-- Â∑•ÂÖ∑Ê†è -->\n    <div class=\"toolbar\">\n      <div class=\"toolbar-section\">\n        <button class=\"toolbar-btn\" @click=\"toggleCropHealth\" :class=\"{ active: showCropHealth }\">\n          <span class=\"btn-icon\">üå±</span>\n          ‰ΩúÁâ©ÂÅ•Â∫∑\n        </button>\n        <button class=\"toolbar-btn\" @click=\"toggleDronePaths\" :class=\"{ active: showDronePaths }\">\n          <span class=\"btn-icon\">‚úàÔ∏è</span>\n          È£ûË°åË∑ØÁ∫ø\n        </button>\n        <button class=\"toolbar-btn\" @click=\"togglePestAreas\" :class=\"{ active: showPestAreas }\">\n          <span class=\"btn-icon\">üêõ</span>\n          ÁóÖËô´ÂÆ≥Âå∫Âüü\n        </button>\n      </div>>\n      <div class=\"toolbar-section\">\n        <button class=\"toolbar-btn\" @click=\"toggleAreaSelection\" :class=\"{ active: isSelectingArea }\">\n          <span class=\"btn-icon\">üó∫Ô∏è</span>\n          Ê°ÜÈÄâËåÉÂõ¥\n        </button>\n        <button class=\"toolbar-btn\" @click=\"togglePathEdit\" :class=\"{ active: isEditingPath }\">\n          <span class=\"btn-icon\">‚úèÔ∏è</span>\n          Ë∞ÉÊï¥Ë∑ØÂæÑ\n        </button>\n        <button class=\"toolbar-btn\" @click=\"toggleManualPathPlanning\">\n          <span class=\"btn-icon\">üß≠</span>\n          ÊâãÂä®ËßÑÂàí\n        </button>\n      </div>\n      <div class=\"toolbar-section\">\n        <button class=\"toolbar-btn primary\" @click=\"generateOptimalPath\">\n          <span class=\"btn-icon\">üöÄ</span>\n          Êô∫ËÉΩ‰ºòÂåñË∑ØÂæÑ\n        </button>\n        <button class=\"toolbar-btn success\" @click=\"executeTask\">\n          <span class=\"btn-icon\">‚ñ∂Ô∏è</span>\n          ÊâßË°å‰ªªÂä°\n        </button>\n      </div>\n    </div>\n    \n    <!-- ‰∏ªÂú∞ÂõæÂå∫Âüü -->\n    <div class=\"map-main-section\">\n      <div class=\"map-container\">\n        <div id=\"map\" class=\"map\"></div>\n        <div class=\"map-brand\">È´òÂæ∑Âú∞Âõæ 2025 ¬∑ Á©∫Èó¥Êô∫ËÉΩ</div>\n        \n        <!-- Áä∂ÊÄÅÊèêÁ§∫ -->\n        <div v-if=\"isSelectingArea\" class=\"map-hint\">\n          <div class=\"hint-content\">\n            <span class=\"hint-text\">ËØ∑Âú®Âú∞Âõæ‰∏äÁÇπÂáªÁªòÂà∂Â§öËæπÂΩ¢Âå∫ÂüüÔºåÂèåÂáªÂÆåÊàêÁªòÂà∂</span>\n            <button class=\"hint-close\" @click=\"cancelAreaSelection\">ÂèñÊ∂à</button>\n          </div>\n        </div>\n        <div v-if=\"isEditingPath\" class=\"map-hint\">\n          <div class=\"hint-content\">\n            <span class=\"hint-text\">ÊãñÂä®Ë∑ØÂæÑÁÇπË∞ÉÊï¥È£ûË°åË∑ØÁ∫øÔºåÁÇπÂáªË∑ØÂæÑÊ∑ªÂä†Êñ∞ÁÇπ</span>\n            <button class=\"hint-close\" @click=\"cancelPathEdit\">ÂÆåÊàêÁºñËæë</button>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Âè≥‰æß‰ø°ÊÅØÈù¢Êùø -->\n      <div class=\"info-panel\">\n        <div class=\"panel-section\">\n          <h3 class=\"panel-title\">Âå∫Âüü‰ø°ÊÅØ</h3>\n          <div class=\"info-grid\">\n            <div class=\"info-item\">\n              <span class=\"info-label\">Èù¢ÁßØ:</span>\n              <span class=\"info-value\">{{ selectedArea?.area || '0' }} ‰∫©</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"info-label\">Âë®Èïø:</span>\n              <span class=\"info-value\">{{ selectedArea?.perimeter || '0' }} Á±≥</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"info-label\">Âπ≥ÂùáÈ´òÂ∫¶:</span>\n              <span class=\"info-value\">{{ selectedArea?.avgHeight || '0' }} Á±≥</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"info-label\">‰ΩúÁâ©Á±ªÂûã:</span>\n              <span class=\"info-value\">{{ selectedArea?.cropType || 'Êú™ÈÄâÊã©' }}</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"panel-section\">\n          <h3 class=\"panel-title\">ÁéØÂ¢ÉÊï∞ÊçÆ</h3>\n          <div class=\"environment-cards\">\n            <div class=\"environment-card\">\n              <span class=\"card-icon temperature-icon\"></span>\n              <div class=\"card-content\">\n                <span class=\"card-value\">{{ environmentData.temperature }}¬∞C</span>\n                <span class=\"card-label\">Ê∏©Â∫¶</span>\n              </div>\n            </div>\n            <div class=\"environment-card\">\n              <span class=\"card-icon humidity-icon\"></span>\n              <div class=\"card-content\">\n                <span class=\"card-value\">{{ environmentData.humidity }}%</span>\n                <span class=\"card-label\">ÊπøÂ∫¶</span>\n              </div>\n            </div>\n            <div class=\"environment-card\">\n              <span class=\"card-icon wind-icon\"></span>\n              <div class=\"card-content\">\n                <span class=\"card-value\">{{ environmentData.windSpeed }} m/s</span>\n                <span class=\"card-label\">È£éÈÄü</span>\n              </div>\n            </div>\n            <div class=\"environment-card\">\n              <span class=\"card-icon precipitation-icon\"></span>\n              <div class=\"card-content\">\n                <span class=\"card-value\">{{ environmentData.precipitation }} mm</span>\n                <span class=\"card-label\">ÈôçÊ∞¥Èáè</span>\n              </div>\n            </div>\n          </div>\n          <button class=\"refresh-btn\" @click=\"fetchEnvironmentData\">\n            <i class=\"refresh-icon\">üîÑ</i> Âà∑Êñ∞Êï∞ÊçÆ\n          </button>\n        </div>\n        <div class=\"panel-section\">\n          <h3 class=\"panel-title\">Âø´ÈÄüÂàÜÊûê</h3>\n          <div class=\"quick-actions\">\n            <button class=\"quick-action-btn\" @click=\"analyzeCropHealth\">\n              <i class=\"action-icon\">üå±</i> ‰ΩúÁâ©ÂÅ•Â∫∑ÂàÜÊûê\n            </button>\n            <button class=\"quick-action-btn\" @click=\"analyzeSoilCondition\">\n              <i class=\"action-icon\">üß™</i> ÂúüÂ£§Êù°‰ª∂ÂàÜÊûê\n            </button>\n            <button class=\"quick-action-btn\" @click=\"predictHarvest\">\n              <i class=\"action-icon\">üìä</i> ‰∫ßÈáèÈ¢ÑÊµã\n            </button>\n            <button class=\"quick-action-btn\" @click=\"optimizeIrrigation\">\n              <i class=\"action-icon\">üíß</i> ÁÅåÊ∫â‰ºòÂåñ\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Êìç‰ΩúÁªìÊûúÂºπÁ™ó -->\n    <div class=\"result-modal\" v-if=\"showResultModal\">\n      <div class=\"modal-content\">\n        <h3 class=\"modal-title\">{{ resultModalTitle }}</h3>\n        <div class=\"modal-body\">{{ resultModalMessage }}</div>\n        <div class=\"modal-footer\">\n          <button class=\"modal-btn\" @click=\"closeResultModal\">Á°ÆÂÆö</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// ÂØºÂÖ•LeafletÂú∞ÂõæÂ∫ìÂèäÂÖ∂CSS\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport AIRoutePlanningService from '../services/AIRoutePlanningService';\n\nexport default {\n  name: 'DroneDashboardMap',\n  data() {\n    return {\n      // Âú∞ÂõæÂÆû‰æãÂíåÊúçÂä°\n      map: null,\n      pathService: AIRoutePlanningService,\n      \n      // Âú∞ÂõæÁä∂ÊÄÅ\n      showCropHealth: false,\n      showDronePaths: false,\n      showPestAreas: false,\n      isSelectingArea: false,\n      isEditingPath: false,\n      isDrawingPath: false,\n      \n      // Âú∞ÂõæÁªòÂà∂Áõ∏ÂÖ≥\n      drawnItems: null,\n      currentPath: [],\n      currentPathLayer: null,\n      \n      // Âå∫Âüü‰ø°ÊÅØ\n      selectedArea: null,\n      selectedVertices: [],\n      \n      // ÁéØÂ¢ÉÊï∞ÊçÆ\n      environmentData: {\n        temperature: 26,\n        humidity: 65,\n        windSpeed: 3.2,\n        precipitation: 0,\n        windDirection: 'NE'\n      },\n      \n      // ‰ΩúÁâ©ÂíåÊó†‰∫∫Êú∫Êï∞ÊçÆ\n      cropType: 'Â∞èÈ∫¶',\n      droneData: {\n        maxTurnAngle: 30,\n        operationWidth: 5\n      },\n      \n      // ÂºπÁ™óÁä∂ÊÄÅ\n      showResultModal: false,\n      resultModalTitle: '',\n      resultModalMessage: ''\n    }\n  },\n  mounted() {\n    this.initializeMap();\n    this.fetchEnvironmentData();\n  },\n  methods: {\n    // ÂàùÂßãÂåñÂú∞Âõæ\n    initializeMap() {\n      try {\n        // Â¢ûÂº∫ÁöÑÂÆâÂÖ®Ê£ÄÊü•ÔºåÈÅøÂÖçÂú®LeafletÂÜÖÈÉ®ËÆøÈóÆnullÂØπË±°\n        if (!window.L || typeof window.L !== 'object') {\n          console.error('LeafletÂ∫ìÊú™Ê≠£Á°ÆÂä†ËΩΩ');\n          return;\n        }\n        \n        // Á°Æ‰øùÊ†∏ÂøÉÂáΩÊï∞ÂèØÁî®\n        if (typeof window.L.map !== 'function' || \n            typeof window.L.tileLayer !== 'function' || \n            typeof window.L.layerGroup !== 'function') {\n          console.error('LeafletÊ†∏ÂøÉÂäüËÉΩ‰∏çÂèØÁî®');\n          return;\n        }\n        \n        // ÂÆâÂÖ®Âú∞ÂºïÁî®L\n        const Leaflet = window.L;\n        \n        // ËÆæÁΩÆÈªòËÆ§‰∏≠ÂøÉÁÇπÂíåÁº©ÊîæÁ∫ßÂà´\n        const center = [34.263161, 108.948024]; // Ë•øÂÆâÂú∞Âå∫‰Ωú‰∏∫Á§∫‰æã\n        const zoom = 13;\n        \n        // Ê£ÄÊü•DOMÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®\n        const mapElement = document.getElementById('map');\n        if (!mapElement) {\n          console.error('Âú∞ÂõæÂÆπÂô®ÂÖÉÁ¥†‰∏çÂ≠òÂú®');\n          return;\n        }\n        \n        // ÂàõÂª∫Âú∞ÂõæÂÆû‰æãÔºå‰∏ç‰ΩøÁî®ÂèØËÉΩÂØºËá¥ÈóÆÈ¢òÁöÑÊèí‰ª∂\n        this.map = Leaflet.map(mapElement, {\n          zoomControl: true,\n          attributionControl: true,\n          // Á¶ÅÁî®ÂèØËÉΩÂØºËá¥ÈóÆÈ¢òÁöÑÊèí‰ª∂ÂàùÂßãÂåñ\n          editable: false\n        }).setView(center, zoom);\n        \n        // Ê∑ªÂä†Âç´ÊòüÂΩ±ÂÉèÂõæÂ±Ç - ‰ΩøÁî®Êõ¥Êñ∞ÁöÑURLÊ†ºÂºèÔºåÂéªÊéâÂØÜÈí•ÂèÇÊï∞ÈÅøÂÖçÂèØËÉΩÁöÑÈôêÂà∂\n        const gaodeSatellite = Leaflet.tileLayer('https://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {\n          subdomains: ['1', '2', '3', '4'],\n          attribution: 'È´òÂæ∑Âú∞Âõæ 2025 ¬∑ Á©∫Èó¥Êô∫ËÉΩ',\n          crossOrigin: true,\n          maxZoom: 18,\n          errorTileUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=='\n        });\n        \n        // Ê∑ªÂä†Ë∑ØÁΩëÂõæÂ±Ç - ‰ΩøÁî®Êõ¥Êñ∞ÁöÑURLÊ†ºÂºè\n        const gaodeRoad = Leaflet.tileLayer('https://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}', {\n          subdomains: ['1', '2', '3', '4'],\n          attribution: 'È´òÂæ∑Âú∞Âõæ 2025 ¬∑ Á©∫Èó¥Êô∫ËÉΩ',\n          crossOrigin: true,\n          maxZoom: 18,\n          errorTileUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=='\n        });\n        \n        // ÁßªÈô§OSMÂ§áÈÄâÂõæÂ±Ç\n        \n        // ÂÆâÂÖ®Âú∞ÂàõÂª∫ÂõæÂ±ÇÁªÑ\n        const satelliteWithRoads = Leaflet.layerGroup([gaodeSatellite, gaodeRoad]);\n        \n        // Ê∑ªÂä†ÂõæÂ±ÇÊéßÂà∂ÔºåÂÖÅËÆ∏Áî®Êà∑ÂàáÊç¢ÊòæÁ§∫Ê®°Âºè\n        const baseLayers = {\n          \"Âç´ÊòüÂΩ±ÂÉè\": gaodeSatellite,\n          \"Âç´ÊòüÂΩ±ÂÉè+Ë∑ØÁΩë\": satelliteWithRoads\n        };\n        \n        // Âè™ÊúâÂú®control.layersÂèØÁî®Êó∂ÊâçÊ∑ªÂä†\n        if (typeof Leaflet.control.layers === 'function') {\n          Leaflet.control.layers(baseLayers).addTo(this.map);\n        }\n        \n        // ÈªòËÆ§ÊòæÁ§∫Âç´ÊòüÂΩ±ÂÉèÔºàÁ∫ØÂç´ÊòüÔºâ\n        // Â¢ûÂä†ÈîôËØØÂ§ÑÁêÜÔºåÁ°Æ‰øùËá≥Â∞ëÊúâ‰∏Ä‰∏™ÂõæÂ±ÇÊòæÁ§∫\n        try {\n          gaodeSatellite.addTo(this.map);\n          // ÁßªÈô§Â§áÈÄâÂõæÂ±ÇÂàáÊç¢ÈÄªËæë\n        } catch (e) {\n          console.error('Âä†ËΩΩÂç´ÊòüÂΩ±ÂÉèÂ§±Ë¥•Ôºå‰ΩøÁî®Â§áÈÄâÂõæÂ±Ç:', e);\n          // ÁßªÈô§Â§áÈÄâÂõæÂ±ÇÂä†ËΩΩÈÄªËæë\n        }\n        \n        // ÂàùÂßãÂåñË∑ØÂæÑËßÑÂàíÊúçÂä°\n        if (this.pathService && typeof this.pathService.initialize === 'function') {\n          try {\n            this.pathService.initialize(this.map);\n          } catch (pathServiceError) {\n            console.error('ÂàùÂßãÂåñË∑ØÂæÑËßÑÂàíÊúçÂä°Â§±Ë¥•:', pathServiceError);\n          }\n        }\n        \n        console.log('Âú∞ÂõæÂàùÂßãÂåñÂÆåÊàê');\n        \n        // ÂàùÂßãÂåñÂú∞Âõæ‰∫§‰∫íÂäüËÉΩ\n        this.initializeMapFeatures();\n      } catch (error) {\n        console.error('Âú∞ÂõæÂàùÂßãÂåñÂ§±Ë¥•:', error);\n      }\n    },\n    \n    // ÂàùÂßãÂåñÂú∞ÂõæÂäüËÉΩ\n    initializeMapFeatures() {\n      try {\n        // Â¢ûÂº∫ÁöÑÂÆâÂÖ®Ê£ÄÊü•\n        if (!this.map || typeof this.map !== 'object') {\n          console.error('Êó†Ê≥ïÂàùÂßãÂåñÂú∞ÂõæÂäüËÉΩÔºöÂú∞ÂõæÂÆû‰æã‰∏çÂ≠òÂú®ÊàñÊó†Êïà');\n          return;\n        }\n        \n        // ÂßãÁªà‰ΩøÁî®window.LËøõË°åÂÆâÂÖ®ËÆøÈóÆ\n        if (!window.L || typeof window.L !== 'object') {\n          console.error('Êó†Ê≥ïÂàùÂßãÂåñÂú∞ÂõæÂäüËÉΩÔºöLeafletÂ∫ìÊú™Ê≠£Á°ÆÂä†ËΩΩ');\n          return;\n        }\n        \n        const Leaflet = window.L;\n        \n        // ÂàõÂª∫Áî®‰∫éÂ≠òÂÇ®ÁªòÂà∂ÂõæÂΩ¢ÁöÑÂõæÂ±ÇÁªÑ\n        if (typeof Leaflet.featureGroup === 'function') {\n          this.drawnItems = Leaflet.featureGroup().addTo(this.map);\n        } else {\n          console.warn('Leaflet featureGroupÂäüËÉΩ‰∏çÂèØÁî®ÔºåÂ∞Ü‰ΩøÁî®Âü∫Á°ÄÂõæÂ±Ç');\n          // ÂõûÈÄÄÂà∞Âü∫Á°ÄÁöÑLayerGroup\n          if (typeof Leaflet.layerGroup === 'function') {\n            this.drawnItems = Leaflet.layerGroup().addTo(this.map);\n          } else {\n            console.error('Êó†Ê≥ïÂàõÂª∫ÂõæÂ±ÇÁªÑÔºåLeafletÂäüËÉΩ‰∏•ÈáçÂèóÈôê');\n            return;\n          }\n        }\n        \n        // Ê£ÄÊü•LeafletÊèí‰ª∂ÂèØÁî®ÊÄßÔºå‰ΩÜ‰∏çÁõ¥Êé•‰æùËµñÂÆÉ‰ª¨\n        console.log('Âú∞ÂõæÂäüËÉΩÂàùÂßãÂåñÂÆåÊàêÔºåÂ∞ÜÂú®ÈúÄË¶ÅÊó∂‰ΩøÁî®ÂÆâÂÖ®ÁöÑAPIË∞ÉÁî®');\n        \n        // Ê∑ªÂä†Á§∫‰æãÂÜúÁî∞Âå∫Âüü‰Ωú‰∏∫ÊºîÁ§∫\n        this.addDemoFarmland();\n        \n        console.log('Âú∞ÂõæÂäüËÉΩÂàùÂßãÂåñÂÆåÊàê');\n      } catch (error) {\n        console.error('Âú∞ÂõæÂäüËÉΩÂàùÂßãÂåñÂ§±Ë¥•:', error);\n      }\n    },\n    \n    // Ê∑ªÂä†Á§∫‰æãÂÜúÁî∞Âå∫Âüü\n    addDemoFarmland() {\n      try {\n        // ÂÆâÂÖ®Ê£ÄÊü•\n        if (!this.drawnItems || !window.L || typeof window.L.polygon !== 'function') {\n          console.error('Êó†Ê≥ïÊ∑ªÂä†Á§∫‰æãÂÜúÁî∞ÔºöÁº∫Â∞ëÂøÖË¶ÅÁªÑ‰ª∂');\n          return;\n        }\n        \n        // ‰ΩøÁî®ÂÆâÂÖ®ÁöÑLeafletÂºïÁî®\n        const Leaflet = window.L;\n        \n        // ÂÆö‰πâ3‰∏™Á§∫‰æãÂÜúÁî∞Âå∫ÂüüÁöÑÊï∞ÊçÆ\n        const farmlands = [\n          {\n            id: 'a',\n            name: 'ÂÜúÁî∞A',\n            vertices: [\n              [34.260, 108.945],\n              [34.260, 108.950],\n              [34.265, 108.950],\n              [34.265, 108.945]\n            ],\n            properties: {\n              area: 50, // ‰∫©\n              perimeter: 1500, // Á±≥\n              avgHeight: 0.7, // Á±≥\n              cropType: 'Â∞èÈ∫¶'\n            },\n            style: {\n              color: '#4caf50',\n              fillColor: '#4caf50',\n              fillOpacity: 0.3,\n              weight: 3\n            }\n          },\n          {\n            id: 'b',\n            name: 'ÂÜúÁî∞B',\n            vertices: [\n              [34.265, 108.950],\n              [34.265, 108.955],\n              [34.270, 108.955],\n              [34.270, 108.950]\n            ],\n            properties: {\n              area: 65, // ‰∫©\n              perimeter: 1800, // Á±≥\n              avgHeight: 0.9, // Á±≥\n              cropType: 'ÁéâÁ±≥'\n            },\n            style: {\n              color: '#8bc34a',\n              fillColor: '#8bc34a',\n              fillOpacity: 0.3,\n              weight: 3\n            }\n          },\n          {\n            id: 'c',\n            name: 'ÂÜúÁî∞C',\n            vertices: [\n              [34.260, 108.950],\n              [34.260, 108.955],\n              [34.265, 108.955],\n              [34.265, 108.950]\n            ],\n            properties: {\n              area: 40, // ‰∫©\n              perimeter: 1200, // Á±≥\n              avgHeight: 0.6, // Á±≥\n              cropType: 'Ê∞¥Á®ª'\n            },\n            style: {\n              color: '#00bcd4',\n              fillColor: '#00bcd4',\n              fillOpacity: 0.3,\n              weight: 3\n            }\n          }\n        ];\n        \n        // ‰øùÂ≠òÊâÄÊúâÂÜúÁî∞ÂºïÁî®ÔºåÁî®‰∫éÈ´ò‰∫ÆÂíåÁÆ°ÁêÜ\n        this.farmlandLayers = {};\n        \n        // ÂàõÂª∫Âπ∂Ê∑ªÂä†ÊØè‰∏™ÂÜúÁî∞Âå∫Âüü\n        farmlands.forEach(farmlandData => {\n          // ÂàõÂª∫Â§öËæπÂΩ¢\n          const farmland = Leaflet.polygon(farmlandData.vertices, farmlandData.style).addTo(this.drawnItems);\n          \n          // ‰øùÂ≠òÂºïÁî®\n          this.farmlandLayers[farmlandData.id] = farmland;\n          \n          // ÁªëÂÆöÁÇπÂáª‰∫ã‰ª∂\n          farmland.on('click', () => {\n            // ÈáçÁΩÆÊâÄÊúâÂÜúÁî∞ÁöÑÊ†∑Âºè\n            Object.values(this.farmlandLayers).forEach(layer => {\n              if (layer && typeof layer.setStyle === 'function') {\n                layer.setStyle({\n                  color: layer._originalColor || '#4caf50',\n                  weight: 3\n                });\n              }\n            });\n            \n            // ‰øùÂ≠òÂéüÂßãÈ¢úËâ≤Ôºå‰ª•‰æøÂêéÁª≠ÈáçÁΩÆ\n            farmland._originalColor = farmlandData.style.color;\n            \n            // ËÆæÁΩÆÈÄâ‰∏≠Âå∫ÂüüÊï∞ÊçÆ\n            this.selectedVertices = farmlandData.vertices;\n            this.selectedArea = farmlandData.properties;\n            this.cropType = farmlandData.properties.cropType;\n            \n            // È´ò‰∫ÆÊòæÁ§∫ÈÄâ‰∏≠Âå∫Âüü\n            farmland.setStyle({\n              color: '#ff9800',\n              weight: 4\n            });\n            \n            // ÊòæÁ§∫ÈÄâÊã©‰ø°ÊÅØ\n            this.showResultModal = true;\n            this.resultModalTitle = `Âå∫ÂüüÂ∑≤ÈÄâÊã©Ôºö${farmlandData.name}`;\n            this.resultModalMessage = `Â∑≤ÈÄâÊã©${farmlandData.name}Ôºå‰ΩúÁâ©Á±ªÂûã‰∏∫${farmlandData.properties.cropType}ÔºåÈù¢ÁßØÁ∫¶${farmlandData.properties.area}‰∫©„ÄÇ\\nÊÇ®ÂèØ‰ª•‰ΩøÁî®Êô∫ËÉΩË∑ØÂæÑËßÑÂàíÂäüËÉΩÁîüÊàêÊúÄ‰ºòÂñ∑Ê¥íË∑ØÂæÑ„ÄÇ`;\n          });\n          \n          // Ê∑ªÂä†ÊèêÁ§∫\n          farmland.bindPopup(`${farmlandData.name}ÔºåÁÇπÂáªÈÄâÊã©`);\n        });\n        \n        console.log('Â∑≤Ê∑ªÂä†3‰∏™Á§∫‰æãÂÜúÁî∞Âå∫ÂüüÔºöA„ÄÅB„ÄÅC');\n      } catch (error) {\n        console.error('Ê∑ªÂä†Á§∫‰æãÂÜúÁî∞Â§±Ë¥•:', error);\n      }\n    },\n    \n    // ÂêØÁî®Âå∫ÂüüÈÄâÊã©ÂäüËÉΩ\n    enableAreaSelection() {\n      try {\n        // Ê£ÄÊü•Âú∞ÂõæÂíåÁªòÂà∂Â±ÇÊòØÂê¶ÂàùÂßãÂåñ\n        if (!this.map || !this.drawnItems) {\n          this.showResultModal = true;\n          this.resultModalTitle = 'Âú∞ÂõæÊú™ÂáÜÂ§áÂ•Ω';\n          this.resultModalMessage = 'Âú∞ÂõæÊú™ÂÆåÂÖ®ÂàùÂßãÂåñÔºåËØ∑Á®çÂêéÂÜçËØï„ÄÇ';\n          return;\n        }\n        \n        // Ê£ÄÊü•LeafletÊòØÂê¶ÂèØÁî®\n        if (!window.L || typeof window.L !== 'object') {\n          this.showResultModal = true;\n          this.resultModalTitle = 'Âú∞ÂõæÊúçÂä°ÈîôËØØ';\n          this.resultModalMessage = 'Âú∞ÂõæÊúçÂä°Êú™Ê≠£Á°ÆÂä†ËΩΩÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï„ÄÇ';\n          return;\n        }\n        \n        // ‰ΩøÁî®ÂÆâÂÖ®ÁöÑLeafletÂºïÁî®\n        const Leaflet = window.L;\n        \n        // Ê∏ÖÈô§‰πãÂâçÁöÑÁªòÂà∂ÂÜÖÂÆπ\n        this.drawnItems.clearLayers();\n        \n        // ÁÆÄÂåñÁâàÊú¨Ôºö‰ΩøÁî®ÁÇπÂáª‰∫ã‰ª∂ÁªòÂà∂Â§öËæπÂΩ¢\n        let polygonPoints = [];\n        let tempPolygon = null;\n        \n        // Á°Æ‰øù‰∫ã‰ª∂Â§ÑÁêÜÂô®ÂÜÖÁöÑthisÊåáÂêëÊ≠£Á°Æ\n        const self = this;\n        \n        const onMapClick = (e) => {\n          try {\n            if (!e?.latlng) return;\n            \n            polygonPoints.push([e.latlng.lat, e.latlng.lng]);\n            \n            // ÊòæÁ§∫‰∏¥Êó∂ÁÇπ\n            if (self.drawnItems && typeof Leaflet.marker === 'function') {\n              Leaflet.marker([e.latlng.lat, e.latlng.lng]).addTo(self.drawnItems);\n              \n              // Êõ¥Êñ∞‰∏¥Êó∂Â§öËæπÂΩ¢\n              if (tempPolygon) {\n                self.drawnItems.removeLayer(tempPolygon);\n              }\n              \n              if (polygonPoints.length > 2) {\n                tempPolygon = Leaflet.polygon(polygonPoints, {\n                  color: '#2196F3',\n                  fillOpacity: 0.2,\n                  dashArray: '5, 5'\n                }).addTo(self.drawnItems);\n              }\n            }\n          } catch (err) {\n            console.error('Â§ÑÁêÜÂú∞ÂõæÁÇπÂáªÊó∂Âá∫Èîô:', err);\n          }\n        };\n        \n        const onMapDblClick = () => {\n          try {\n            // ÂÆåÊàêÂ§öËæπÂΩ¢ÁªòÂà∂\n            if (polygonPoints.length > 2) {\n              // Èó≠ÂêàÂ§öËæπÂΩ¢\n              polygonPoints.push(polygonPoints[0]);\n              \n              // ÂàõÂª∫ÊúÄÁªàÂ§öËæπÂΩ¢\n              if (self.drawnItems && typeof Leaflet.polygon === 'function') {\n                Leaflet.polygon(polygonPoints, {\n                  color: '#4caf50',\n                  fillColor: '#4caf50',\n                  fillOpacity: 0.3,\n                  weight: 3\n                }).addTo(self.drawnItems);\n                \n                // ÁßªÈô§‰∏¥Êó∂Â§öËæπÂΩ¢\n                if (tempPolygon) {\n                  self.drawnItems.removeLayer(tempPolygon);\n                }\n              }\n              \n              // ‰øùÂ≠òÈÄâ‰∏≠Âå∫Âüü\n              self.selectedVertices = polygonPoints;\n              \n              // ÂÆâÂÖ®Âú∞ËÆ°ÁÆóÂå∫ÂüüÂ±ûÊÄß\n              const area = self.calculateArea ? self.calculateArea(polygonPoints) : 0;\n              const perimeter = self.calculatePerimeter ? self.calculatePerimeter(polygonPoints) : 0;\n              \n              self.selectedArea = {\n                area: area,\n                perimeter: perimeter,\n                avgHeight: 0.8,\n                cropType: self.cropType || 'Êú™ÊåáÂÆö'\n              };\n              \n              // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ\n              self.showResultModal = true;\n              self.resultModalTitle = 'Âå∫ÂüüÁªòÂà∂ÂÆåÊàê';\n              self.resultModalMessage = `Â∑≤ÊàêÂäüÁªòÂà∂‰Ωú‰∏öÂå∫ÂüüÔºåÈù¢ÁßØÁ∫¶‰∏∫${area.toFixed(2)}‰∫©„ÄÇ`;\n            } else {\n              self.showResultModal = true;\n              self.resultModalTitle = 'Âå∫ÂüüÊó†Êïà';\n              self.resultModalMessage = 'ËØ∑Ëá≥Â∞ëÈÄâÊã©3‰∏™ÁÇπÊù•ÂÆö‰πâ‰∏Ä‰∏™ÊúâÊïàÂå∫Âüü„ÄÇ';\n            }\n          } catch (err) {\n            console.error('ÂÆåÊàêÂå∫ÂüüÈÄâÊã©Êó∂Âá∫Èîô:', err);\n            self.showResultModal = true;\n            self.resultModalTitle = 'Êìç‰ΩúÂ§±Ë¥•';\n            self.resultModalMessage = 'ÂÆåÊàêÂå∫ÂüüÈÄâÊã©Êó∂ÂèëÁîüÈîôËØØÔºåËØ∑ÈáçËØï„ÄÇ';\n          } finally {\n            // ÁßªÈô§‰∫ã‰ª∂ÁõëÂê¨Âô®\n            if (self.map) {\n              self.map.off('click', onMapClick);\n              self.map.off('dblclick', onMapDblClick);\n            }\n            self.isSelectingArea = false;\n          }\n        };\n        \n        // ÁßªÈô§‰πãÂâçÂèØËÉΩÂ≠òÂú®ÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®\n        this.map.off('click', onMapClick);\n        this.map.off('dblclick', onMapDblClick);\n        \n        // Ê∑ªÂä†Êñ∞ÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®\n        this.map.on('click', onMapClick);\n        this.map.on('dblclick', onMapDblClick);\n        \n      } catch (error) {\n        console.error('ÂêØÁî®Âå∫ÂüüÈÄâÊã©ÂäüËÉΩÂ§±Ë¥•:', error);\n        this.showResultModal = true;\n        this.resultModalTitle = 'ÂäüËÉΩÂàùÂßãÂåñÂ§±Ë¥•';\n        this.resultModalMessage = 'Êó†Ê≥ïÂêØÁî®Âå∫ÂüüÈÄâÊã©ÂäüËÉΩÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï„ÄÇ';\n        this.isSelectingArea = false;\n      }\n    },\n    \n    // ËÆ°ÁÆóÂ§öËæπÂΩ¢Èù¢ÁßØÔºàÁÆÄÂåñËÆ°ÁÆóÔºâ\n    calculateArea(points) {\n      try {\n        // ‰ΩøÁî®ÂÆâÂÖ®ÁöÑLeafletÂºïÁî®\n        const Leaflet = window.L;\n        \n        // Â¶ÇÊûúLeafletÂèØÁî®‰∏îÊúâÊõ¥Â•ΩÁöÑËÆ°ÁÆóÊñπÊ≥ïÔºåÂàô‰ΩøÁî®Leaflet\n        if (Leaflet && typeof Leaflet.latLngBounds === 'function') {\n          const bounds = Leaflet.latLngBounds(points);\n          const center = bounds.getCenter();\n          const ne = bounds.getNorthEast();\n          const distance = this.calculateDistance(center.lat, center.lng, ne.lat, ne.lng);\n          // ÁÆÄÂåñËÆ°ÁÆóÔºöÂ∞ÜÂØπËßíÁ∫øË∑ùÁ¶ªÂπ≥Êñπ‰Ωú‰∏∫Èù¢ÁßØËøë‰ººÂÄºÔºåÂÜçËΩ¨Êç¢‰∏∫‰∫©\n          return (Math.pow(distance, 2)) / 666.67;\n        }\n        \n        // ÈôçÁ∫ßÂà∞ÂéüÂßãÁöÑÁÆÄÂåñÈù¢ÁßØËÆ°ÁÆóÁÆóÊ≥ï\n        const earthRadius = 6371000; // Âú∞ÁêÉÂçäÂæÑÔºåÂçï‰ΩçÁ±≥\n        let area = 0;\n        \n        for (let i = 0; i < points.length - 1; i++) {\n          const p1 = points[i];\n          const p2 = points[i + 1];\n          \n          area += (p2[1] - p1[1]) * (2 + Math.sin(p1[0] * Math.PI / 180) + Math.sin(p2[0] * Math.PI / 180));\n        }\n        \n        area = Math.abs(area * earthRadius * earthRadius / 2);\n        return area / 666.67; // ËΩ¨Êç¢‰∏∫‰∫©\n      } catch (err) {\n        console.error('ËÆ°ÁÆóÈù¢ÁßØÊó∂Âá∫Èîô:', err);\n        return 0;\n      }\n    },\n    \n    // ËÆ°ÁÆóÂ§öËæπÂΩ¢Âë®ÈïøÔºàÁÆÄÂåñËÆ°ÁÆóÔºâ\n    calculatePerimeter(points) {\n      try {\n        let perimeter = 0;\n        \n        for (let i = 0; i < points.length - 1; i++) {\n          perimeter += this.calculateDistance(points[i][0], points[i][1], points[i+1][0], points[i+1][1]);\n        }\n        \n        return perimeter;\n      } catch (err) {\n        console.error('ËÆ°ÁÆóÂë®ÈïøÊó∂Âá∫Èîô:', err);\n        return 0;\n      }\n    },\n    \n    // ËÆ°ÁÆó‰∏§ÁÇπÈó¥Ë∑ùÁ¶ªÔºàHaversineÂÖ¨ÂºèÔºâ\n    calculateDistance(lat1, lon1, lat2, lon2) {\n      try {\n        // ‰ΩøÁî®ÂÆâÂÖ®ÁöÑLeafletÂºïÁî®\n        const Leaflet = window.L;\n        \n        // Â¶ÇÊûúLeafletÂèØÁî®Ôºå‰ΩøÁî®ÂÖ∂distanceToÊñπÊ≥ï\n        if (Leaflet && typeof Leaflet.latLng === 'function') {\n          const latLng1 = Leaflet.latLng(lat1, lon1);\n          const latLng2 = Leaflet.latLng(lat2, lon2);\n          return latLng1.distanceTo(latLng2);\n        }\n        \n        // ÈôçÁ∫ßÂà∞ÂéüÂßãÁöÑHaversineÂÖ¨ÂºèËÆ°ÁÆó\n        const R = 6371e3; // Âú∞ÁêÉÂçäÂæÑÔºàÁ±≥Ôºâ\n        const œÜ1 = lat1 * Math.PI/180;\n        const œÜ2 = lat2 * Math.PI/180;\n        const ŒîœÜ = (lat2-lat1) * Math.PI/180;\n        const ŒîŒª = (lon2-lon1) * Math.PI/180;\n\n        const a = Math.sin(ŒîœÜ/2) * Math.sin(ŒîœÜ/2) +\n                  Math.cos(œÜ1) * Math.cos(œÜ2) *\n                  Math.sin(ŒîŒª/2) * Math.sin(ŒîŒª/2);\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n        return R * c;\n      } catch (err) {\n        console.error('ËÆ°ÁÆóË∑ùÁ¶ªÊó∂Âá∫Èîô:', err);\n        return 0;\n      }\n    },\n    \n    // Â∑•ÂÖ∑Ê†èÊñπÊ≥ï\n    toggleCropHealth() {\n      this.showCropHealth = !this.showCropHealth;\n      this.updateMapLayers();\n    },\n    toggleDronePaths() {\n      this.showDronePaths = !this.showDronePaths;\n      this.updateMapLayers();\n    },\n    togglePestAreas() {\n      this.showPestAreas = !this.showPestAreas;\n      this.updateMapLayers();\n    },\n    toggleAreaSelection() {\n      this.isSelectingArea = !this.isSelectingArea;\n      this.isEditingPath = false;\n      this.isDrawingPath = false;\n      \n      // ÂΩìÊøÄÊ¥ªÂå∫ÂüüÈÄâÊã©Êó∂ÔºåÂêØÁî®ÈÄâÊã©ÂäüËÉΩ\n      if (this.isSelectingArea) {\n        this.enableAreaSelection();\n      }\n    },\n    togglePathEdit() {\n      this.isEditingPath = !this.isEditingPath;\n      this.isSelectingArea = false;\n      this.isDrawingPath = false;\n    },\n    toggleManualPathPlanning() {\n      this.isDrawingPath = !this.isDrawingPath;\n      this.isSelectingArea = false;\n      this.isEditingPath = false;\n    },\n    \n    // ÂèñÊ∂àÊìç‰Ωú\n    cancelAreaSelection() {\n      this.isSelectingArea = false;\n      // Á°Æ‰øùÁßªÈô§ÊâÄÊúâÁõ∏ÂÖ≥ÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®\n      if (this.map) {\n        this.map.off('click');\n        this.map.off('dblclick');\n      }\n    },\n    cancelPathEdit() {\n      this.isEditingPath = false;\n    },\n    \n    // Êô∫ËÉΩÂäüËÉΩ\n    async generateOptimalPath() {\n      try {\n        // ‰ΩøÁî®ÂÆâÂÖ®ÁöÑLeafletÂºïÁî®\n        const Leaflet = window.L;\n        \n        // Ê£ÄÊü•LeafletÊòØÂê¶ÂèØÁî®\n        if (!Leaflet || typeof Leaflet !== 'object') {\n          this.showResultModal = true;\n          this.resultModalTitle = 'Âú∞ÂõæÊúçÂä°ÈîôËØØ';\n          this.resultModalMessage = 'Âú∞ÂõæÊúçÂä°Êú™Ê≠£Á°ÆÂä†ËΩΩÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï„ÄÇ';\n          return;\n        }\n        \n        if (!this.selectedVertices || this.selectedVertices.length === 0) {\n          this.showResultModal = true;\n          this.resultModalTitle = 'ÊèêÁ§∫';\n          this.resultModalMessage = 'ËØ∑ÂÖàÈÄâÊã©‰Ωú‰∏öÂå∫Âüü';\n          return;\n        }\n        \n        // Ê£ÄÊü•Ë∑ØÂæÑÊúçÂä°ÊòØÂê¶ÂèØÁî®\n        if (!this.pathService || typeof this.pathService.generateOptimalRoute !== 'function') {\n          this.showResultModal = true;\n          this.resultModalTitle = 'ÊúçÂä°ÈîôËØØ';\n          this.resultModalMessage = 'Ë∑ØÂæÑËßÑÂàíÊúçÂä°Êú™Ê≠£Á°ÆÂàùÂßãÂåñÔºåËØ∑ËÅîÁ≥ªÊäÄÊúØÊîØÊåÅ„ÄÇ';\n          return;\n        }\n        \n        // ÊòæÁ§∫Âä†ËΩΩ‰∏≠Áä∂ÊÄÅ\n        this.showResultModal = true;\n        this.resultModalTitle = 'Ë∑ØÂæÑ‰ºòÂåñ‰∏≠';\n        this.resultModalMessage = 'Ê≠£Âú®‰ΩøÁî®AIÁÆóÊ≥ïÁîüÊàêÊúÄ‰ºòÂñ∑Ê¥íË∑ØÂæÑÔºåËØ∑Á®çÂÄô...';\n        \n        // ÊûÑÂª∫ÂÜúÁî∞Êï∞ÊçÆ\n        const farmlandData = {\n          vertices: this.selectedVertices,\n          obstacles: [], // ÂèØ‰ª•‰ªéÂú∞Âõæ‰∏äËé∑ÂèñÈöúÁ¢çÁâ©Êï∞ÊçÆ\n          area: this.selectedArea?.area || 0\n        };\n        \n        // Ë∞ÉÁî®AIË∑ØÂæÑËßÑÂàíÊúçÂä°\n        const result = await this.pathService.generateOptimalRoute(\n          farmlandData,\n          this.selectedVertices,\n          this.cropType,\n          this.environmentData || { temperature: 25, humidity: 60, windSpeed: 3 },\n          this.droneData || { maxTurnAngle: 30, operationWidth: 5 }\n        );\n        \n        if (result && result.success && result.path && result.path.length > 0) {\n          this.currentPath = result.path;\n          \n          // Êõ¥Êñ∞ÂºπÁ™ó‰ø°ÊÅØ\n          this.resultModalTitle = 'Ë∑ØÂæÑ‰ºòÂåñÂÆåÊàê';\n          this.resultModalMessage = `Âü∫‰∫éAIÁÆóÊ≥ïÁöÑÊúÄ‰ºòÂñ∑Ê¥íË∑ØÂæÑÂ∑≤ÁîüÊàêÔºÅ\\n` +\n            `Ë∑ØÂæÑÊÄªÈïøÂ∫¶Ôºö${(result.metrics?.totalDistance || 0)}Á±≥\\n` +\n            `È¢ÑËÆ°È£ûË°åÊó∂Èó¥Ôºö${Math.round((result.metrics?.estimatedTime || 0) / 60)}ÂàÜÈíü\\n` +\n            `‰ºòÂåñÊïàÁéáÔºö${(result.metrics?.estimatedEfficiency || 0).toFixed(1)}%\\n` +\n            `È¢ÑËÆ°ÂèØËäÇÁúÅÁ∫¶20%ÁöÑ‰Ωú‰∏öÊó∂Èó¥ÂíåÂÜúËçØÁî®Èáè„ÄÇ`;\n          \n          // Â¶ÇÊûúË∑ØÂæÑÊàêÂäüÁîüÊàê‰∏îÂú∞ÂõæÂèØÁî®ÔºåÂú®Âú∞Âõæ‰∏äÊòæÁ§∫Ë∑ØÂæÑ\n            if (this.map && typeof this.map === 'object') {\n              // ÂÆâÂÖ®Ëé∑ÂèñLeafletÂºïÁî®\n              const Leaflet = window.L || L;\n              if (!Leaflet || typeof Leaflet.polyline !== 'function') {\n                console.warn('Leaflet‰∏çÂèØÁî®ÊàñpolylineÂäüËÉΩÁº∫Â§±');\n                return;\n              }\n              \n              // Ê∏ÖÈô§‰πãÂâçÂèØËÉΩÂ≠òÂú®ÁöÑË∑ØÂæÑ\n              if (this.currentPathLayer) {\n                try {\n                  if (typeof this.currentPathLayer.remove === 'function') {\n                    this.currentPathLayer.remove();\n                  } else if (typeof this.map.removeLayer === 'function') {\n                    this.map.removeLayer(this.currentPathLayer);\n                  }\n                } catch (removeError) {\n                  console.warn('ÁßªÈô§ÊóßË∑ØÂæÑÂõæÂ±ÇÂ§±Ë¥•:', removeError);\n                }\n                this.currentPathLayer = null;\n              }\n              \n              // ÂàõÂª∫Âπ∂ÊòæÁ§∫Êñ∞Ë∑ØÂæÑ\n              try {\n                // ÂÆâÂÖ®Âú∞ÂàõÂª∫Ë∑ØÂæÑÂπ∂Ê∑ªÂä†Âà∞Âú∞Âõæ\n                const pathLine = Leaflet.polyline(result.path, {\n                  color: '#ff0000',\n                  weight: 4,\n                  dashArray: '10, 5'\n                });\n                \n                if (typeof pathLine.addTo === 'function' && typeof this.map === 'object') {\n                  this.currentPathLayer = pathLine;\n                  pathLine.addTo(this.map);\n                }\n              } catch (polylineError) {\n                console.error('ÂàõÂª∫Ë∑ØÂæÑÂ§±Ë¥•:', polylineError);\n              }\n            }\n        } else {\n          this.resultModalTitle = 'Ë∑ØÂæÑ‰ºòÂåñÂ§±Ë¥•';\n          this.resultModalMessage = 'Êó†Ê≥ïÁîüÊàêË∑ØÂæÑÔºåËØ∑Ê£ÄÊü•Âå∫ÂüüËÆæÁΩÆÂπ∂ÈáçËØï„ÄÇ';\n        }\n      } catch (error) {\n        console.error('Ë∑ØÂæÑËßÑÂàíÂ§±Ë¥•:', error);\n        this.showResultModal = true;\n        this.resultModalTitle = 'Ë∑ØÂæÑ‰ºòÂåñÂ§±Ë¥•';\n        this.resultModalMessage = `Ë∑ØÂæÑËßÑÂàíËøáÁ®ã‰∏≠ÂèëÁîüÈîôËØØÔºö${error.message || 'Êú™Áü•ÈîôËØØ'}ÔºåËØ∑ÈáçËØï„ÄÇ`;\n      }\n    },\n    \n    executeTask() {\n      // ÊâßË°å‰ªªÂä°ÈÄªËæë\n      if (!this.selectedArea) {\n        this.showResultModal = true;\n        this.resultModalTitle = 'ÊèêÁ§∫';\n        this.resultModalMessage = 'ËØ∑ÂÖàÈÄâÊã©‰Ωú‰∏öÂå∫Âüü';\n        return;\n      }\n      \n      this.showResultModal = true;\n      this.resultModalTitle = '‰ªªÂä°Â∑≤ÂêØÂä®';\n      this.resultModalMessage = 'Êó†‰∫∫Êú∫‰Ωú‰∏ö‰ªªÂä°Â∑≤ÊàêÂäüÂêØÂä®ÔºåÈ¢ÑËÆ°ÂÆåÊàêÊó∂Èó¥Á∫¶30ÂàÜÈíü„ÄÇ';\n    },\n    \n    // Êï∞ÊçÆËé∑Âèñ\n    fetchEnvironmentData() {\n      // Ê®°ÊãüËé∑ÂèñÁéØÂ¢ÉÊï∞ÊçÆ\n      setTimeout(() => {\n        this.environmentData = {\n          temperature: 26.5,\n          humidity: 62,\n          windSpeed: 3.5,\n          precipitation: 0\n        };\n      }, 1000);\n    },\n    \n    // ÂàÜÊûêÂäüËÉΩ\n    analyzeCropHealth() {\n      this.showResultModal = true;\n      this.resultModalTitle = '‰ΩúÁâ©ÂÅ•Â∫∑ÂàÜÊûê';\n      this.resultModalMessage = 'ÂàÜÊûêÂÆåÊàêÔºö85%Âå∫Âüü‰ΩúÁâ©ÁîüÈïøËâØÂ•ΩÔºå15%Âå∫ÂüüÈúÄË¶ÅÈ¢ùÂ§ñÊñΩËÇ•„ÄÇÂª∫ËÆÆÂ¢ûÂä†Ê∞ÆËÇ•ÊñΩÂä†Èáè15%„ÄÇ';\n    },\n    \n    analyzeSoilCondition() {\n      this.showResultModal = true;\n      this.resultModalTitle = 'ÂúüÂ£§Êù°‰ª∂ÂàÜÊûê';\n      this.resultModalMessage = 'ÂúüÂ£§Ê£ÄÊµãÔºöPHÂÄº6.8ÔºàÈÄÇÂÆúÔºâÔºåÊúâÊú∫Ë¥®Âê´Èáè3.2%Ôºà‰∏≠Á≠âÔºâÔºåÂª∫ËÆÆÂ¢ûÂä†ÊúâÊú∫ËÇ•‰ΩøÁî®„ÄÇ';\n    },\n    \n    predictHarvest() {\n      this.showResultModal = true;\n      this.resultModalTitle = '‰∫ßÈáèÈ¢ÑÊµã';\n      this.resultModalMessage = 'Ê†πÊçÆÂΩìÂâçÁîüÈïøÊÉÖÂÜµÂíåÂéÜÂè≤Êï∞ÊçÆÔºåÈ¢ÑËÆ°‰∫ßÈáè‰∏∫ÊØè‰∫©650ÂÖ¨Êñ§ÔºåÊØîÂéªÂπ¥ÂêåÊúüÂ¢ûÈïø12%„ÄÇ';\n    },\n    \n    optimizeIrrigation() {\n      this.showResultModal = true;\n      this.resultModalTitle = 'ÁÅåÊ∫â‰ºòÂåñ';\n      this.resultModalMessage = 'ÁÅåÊ∫âÊñπÊ°àÂ∑≤‰ºòÂåñÔºöÂª∫ËÆÆÊØè3Â§©ÁÅåÊ∫â‰∏ÄÊ¨°ÔºåÊØèÊ¨°Áî®Ê∞¥ÈáèÂáèÂ∞ë25%ÔºåÈááÁî®Êª¥ÁÅåÊñπÂºèÂèØËøõ‰∏ÄÊ≠•ËäÇÊ∞¥„ÄÇ';\n    },\n    \n    // ËæÖÂä©ÊñπÊ≥ï\n    updateMapLayers() {\n      // Êõ¥Êñ∞Âú∞ÂõæÂõæÂ±ÇÊòæÁ§∫\n      console.log('Êõ¥Êñ∞Âú∞ÂõæÂõæÂ±Ç');\n    },\n    \n    closeResultModal() {\n      this.showResultModal = false;\n    },\n    \n    // Â§ÑÁêÜÂú∞ÂõæÁº©Êîæ‰∫ã‰ª∂ÔºåÂÆåÂÖ®ÁßªÈô§ÈÅøÂÖçÈîôËØØ\n    handleMapZoom() {\n      // ‰øùÁïôÊ≠§ÊñπÊ≥ï‰ΩÜ‰∏çÊâßË°å‰ªª‰ΩïÊìç‰ΩúÔºåÈÅøÂÖçÂºïÁî®ÈîôËØØ\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dashboard-map-container {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: #f5f7fa;\n}\n\n/* Â∑•ÂÖ∑Ê†èÊ†∑Âºè */\n.toolbar {\n  background: white;\n  padding: 10px 20px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  display: flex;\n  gap: 20px;\n  align-items: center;\n}\n\n.toolbar-section {\n  display: flex;\n  gap: 10px;\n}\n\n.toolbar-btn {\n  padding: 8px 16px;\n  border: 1px solid #ddd;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.9rem;\n  transition: all 0.3s ease;\n}\n\n.toolbar-btn:hover {\n  background: #f8f9fa;\n  border-color: #4CAF50;\n  color: #4CAF50;\n}\n\n.toolbar-btn.active {\n  background: #4CAF50;\n  color: white;\n  border-color: #4CAF50;\n}\n\n.toolbar-btn.primary {\n  background: #2196F3;\n  color: white;\n  border-color: #2196F3;\n}\n\n.toolbar-btn.primary:hover {\n  background: #1976D2;\n}\n\n.toolbar-btn.success {\n  background: #4CAF50;\n  color: white;\n  border-color: #4CAF50;\n}\n\n.toolbar-btn.success:hover {\n  background: #45a049;\n}\n\n.btn-icon {\n  width: 18px;\n  height: 18px;\n}\n\n/* ‰∏ªÂú∞ÂõæÂå∫Âüü */\n.map-main-section {\n  flex: 1;\n  display: flex;\n  gap: 20px;\n  padding: 20px;\n  overflow: hidden;\n}\n\n.map-container {\n  flex: 1;\n  position: relative;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.map {\n  width: 100%;\n  height: 100%;\n  min-height: 600px;\n}\n\n.map-brand {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n  font-size: 0.8rem;\n  color: #666;\n  background: rgba(255, 255, 255, 0.8);\n  padding: 4px 8px;\n  border-radius: 4px;\n}\n\n/* Áä∂ÊÄÅÊèêÁ§∫ */\n.map-hint {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  z-index: 1000;\n}\n\n.hint-content {\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 10px 15px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.hint-text {\n  font-size: 0.9rem;\n}\n\n.hint-close {\n  background: rgba(255, 255, 255, 0.2);\n  color: white;\n  border: none;\n  padding: 5px 10px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n}\n\n.hint-close:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n/* Âè≥‰æß‰ø°ÊÅØÈù¢Êùø */\n.info-panel {\n  width: 320px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.panel-section {\n  background: white;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.panel-title {\n  margin: 0 0 15px 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #333;\n}\n\n/* ‰ø°ÊÅØÁΩëÊ†º */\n.info-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 10px;\n}\n\n.info-item {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.info-label {\n  font-size: 0.85rem;\n  color: #666;\n}\n\n.info-value {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #333;\n}\n\n/* ÁéØÂ¢ÉÊï∞ÊçÆÂç°Áâá */\n.environment-cards {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 10px;\n  margin-bottom: 15px;\n}\n\n.environment-card {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px;\n  background: #f8f9fa;\n  border-radius: 6px;\n}\n\n.card-icon {\n  width: 24px;\n  height: 24px;\n}\n\n.card-content {\n  flex: 1;\n}\n\n.card-value {\n  display: block;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #333;\n}\n\n.card-label {\n  display: block;\n  font-size: 0.8rem;\n  color: #666;\n}\n\n.refresh-btn {\n  width: 100%;\n  padding: 8px;\n  background: #f8f9fa;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 5px;\n  font-size: 0.9rem;\n  transition: all 0.3s ease;\n}\n\n.refresh-btn:hover {\n  background: #e9ecef;\n}\n\n.refresh-icon {\n  font-size: 0.9rem;\n}\n\n/* Âø´ÈÄüÊìç‰Ωú */\n.quick-actions {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 10px;\n}\n\n.quick-action-btn {\n  padding: 12px;\n  background: #f8f9fa;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 0.95rem;\n  transition: all 0.3s ease;\n  text-align: left;\n}\n\n.quick-action-btn:hover {\n  background: #e9ecef;\n  border-color: #4CAF50;\n  transform: translateY(-1px);\n}\n\n.action-icon {\n  font-size: 1.1rem;\n}\n\n/* ÁªìÊûúÂºπÁ™ó */\n.result-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 8px;\n  padding: 30px;\n  width: 400px;\n  max-width: 90vw;\n  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);\n}\n\n.modal-title {\n  margin: 0 0 20px 0;\n  font-size: 1.3rem;\n  font-weight: 600;\n  color: #333;\n}\n\n.modal-body {\n  margin-bottom: 20px;\n  color: #666;\n  line-height: 1.5;\n}\n\n.modal-footer {\n  margin-top: 20px;\n  text-align: center;\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n}\n\n.modal-btn {\n  padding: 10px 30px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: background 0.3s;\n}\n\n.modal-btn.primary {\n  background: #2196F3;\n  color: white;\n}\n\n.modal-btn.secondary {\n  background: #6c757d;\n  color: white;\n}\n\n.modal-btn.primary:hover {\n  background: #1976D2;\n}\n\n.modal-btn.secondary:hover {\n  background: #5a6268;\n}\n\n.modal-btn:hover {\n  background: #45a049;\n}\n</style>","// AIËæÖÂä©Ëà™Á∫øËßÑÂàíÊúçÂä°\nimport L from 'leaflet';\n\n/**\n * AIËæÖÂä©Ëà™Á∫øËßÑÂàíÊúçÂä°Á±ª\n * Êèê‰æõÂü∫‰∫éÂÜúÁî∞ÂΩ¢Áä∂„ÄÅ‰ΩúÁâ©Á±ªÂûã„ÄÅÁóÖËô´ÂÆ≥ÂàÜÂ∏ÉÁ≠âÂõ†Á¥†ÁöÑÊô∫ËÉΩË∑ØÂæÑËßÑÂàí\n */\nclass AIRoutePlanningService {\n  constructor() {\n    // ÂàùÂßãÂåñÊúçÂä°\n    this.optimalPath = [];\n    this.map = null;\n    this.pathLayer = null;\n  }\n  \n  /**\n   * ÂàùÂßãÂåñË∑ØÂæÑËßÑÂàíÊúçÂä°\n   * @param {Object} map - LeafletÂú∞ÂõæÂÆû‰æã\n   */\n  initialize(map) {\n    try {\n      // Â¢ûÂº∫ÁöÑÂÆâÂÖ®Ê£ÄÊü•\n      if (!map || typeof map !== 'object') {\n        console.error('Âú∞ÂõæÂÆû‰æãÊó†ÊïàÊàñ‰∏çÂ≠òÂú®');\n        return;\n      }\n      \n      // ‰ΩøÁî®Êõ¥ÂÆâÂÖ®ÁöÑÊñπÂºèËÆøÈóÆLeafletÔºå‰ºòÂÖà‰ΩøÁî®window.L\n      const Leaflet = window.L || L;\n      \n      // Ê£ÄÊü•LeafletÊòØÂê¶Â≠òÂú®‰∏îÂèØÁî®\n      if (typeof Leaflet === 'undefined' || typeof Leaflet.layerGroup !== 'function') {\n        console.error('LeafletÂ∫ìÊú™Ê≠£Á°ÆÂä†ËΩΩ');\n        return;\n      }\n      \n      this.map = map;\n      \n      // Ê∏ÖÈô§ÂèØËÉΩÂ∑≤Â≠òÂú®ÁöÑË∑ØÂæÑÂõæÂ±Ç\n      if (this.currentPathLayer) {\n        try {\n          if (typeof this.currentPathLayer.remove === 'function') {\n            this.currentPathLayer.remove();\n          } else if (typeof map.removeLayer === 'function') {\n            map.removeLayer(this.currentPathLayer);\n          }\n        } catch (removeError) {\n          console.warn('ÁßªÈô§ÊóßË∑ØÂæÑÂõæÂ±ÇÂ§±Ë¥•:', removeError);\n        }\n        this.currentPathLayer = null;\n      }\n      \n      // ÂàõÂª∫Êñ∞ÁöÑË∑ØÂæÑÂõæÂ±Ç\n      try {\n        this.currentPathLayer = Leaflet.layerGroup();\n        // ÂÆâÂÖ®Âú∞Ê∑ªÂä†Âà∞Âú∞Âõæ\n        if (typeof map.addLayer === 'function') {\n          map.addLayer(this.currentPathLayer);\n        }\n      } catch (layerError) {\n        console.error('ÂàõÂª∫Ë∑ØÂæÑÂõæÂ±ÇÂ§±Ë¥•:', layerError);\n        // Â¶ÇÊûúÂàõÂª∫ÂõæÂ±ÇÂ§±Ë¥•Ôºå‰∏çÈòªÊ≠¢ÊúçÂä°ÂàùÂßãÂåñ\n      }\n      \n      console.log('AIË∑ØÂæÑËßÑÂàíÊúçÂä°ÂàùÂßãÂåñÂÆåÊàê');\n    } catch (error) {\n      console.error('ÂàùÂßãÂåñË∑ØÂæÑËßÑÂàíÊúçÂä°Êó∂Âá∫Èîô:', error);\n    }\n  }\n\n  /**\n   * ÂàùÂßãÂåñË∑ØÂæÑËßÑÂàíÊúçÂä° (‰øùÊåÅÂêëÂêéÂÖºÂÆπ)\n   * @param {Object} mapInstance - LeafletÂú∞ÂõæÂÆû‰æã\n   */\n  init(mapInstance) {\n    // Áõ¥Êé•Ë∞ÉÁî®initializeÊñπÊ≥ïÔºå‰øùÊåÅË°å‰∏∫‰∏ÄËá¥ÊÄß\n    this.initialize(mapInstance);\n  }\n\n  /**\n   * Âü∫‰∫éÂÜúÁî∞ÂΩ¢Áä∂ÁîüÊàêÊúÄ‰ºòËà™Á∫ø\n   * @param {Object} farmlandData - ÂÜúÁî∞Êï∞ÊçÆ\n   * @param {Array} vertices - ÂÜúÁî∞Â§öËæπÂΩ¢È°∂ÁÇπ\n   * @param {string} cropType - ‰ΩúÁâ©Á±ªÂûã\n   * @param {Object} environmentData - ÁéØÂ¢ÉÊï∞ÊçÆ\n   * @param {Object} droneData - Êó†‰∫∫Êú∫Êï∞ÊçÆ\n   * @returns {Promise} ËßÑÂàíÁªìÊûúPromise\n   */\n  generateOptimalRoute(farmlandData, vertices, cropType, environmentData, droneData = {}) {\n    return new Promise((resolve, reject) => {\n      try {\n        // Ê®°ÊãüAIËÆ°ÁÆóËøáÁ®ã\n        setTimeout(() => {\n          // 1. Ê†πÊçÆÂÜúÁî∞ÂΩ¢Áä∂ÁîüÊàêÂàùÂßãË∑ØÂæÑÁÇπ\n          const initialPath = this._generateBasePathFromVertices(vertices);\n          \n          // 2. Ê†πÊçÆ‰ΩúÁâ©Á±ªÂûãË∞ÉÊï¥Ë∑ØÂæÑÈó¥Ë∑ù\n          const adjustedPath = this._adjustPathForCropType(initialPath, cropType);\n          \n          // 3. Ê†πÊçÆÈ£éÂêëËøõË°åËà™Á∫ø‰ºòÂåñ\n          const windOptimizedPath = this._optimizePathByWind(adjustedPath, environmentData);\n          \n          // 4. ËÄÉËôëÈöúÁ¢çÁâ©ÔºàÂ¶ÇÊûúÊúâÔºâ\n          const obstacleAvoidedPath = this._avoidObstacles(windOptimizedPath, farmlandData.obstacles || []);\n          \n          // 5. ÊúÄÂêéËøõË°åÊï¥‰Ωì‰ºòÂåñÔºåÂáèÂ∞ëËΩ¨ÊäòÂíåÊÄªË∑ùÁ¶ª\n          this.optimalPath = this._optimizePathEfficiency(obstacleAvoidedPath, droneData);\n          \n          // ÂèØËßÜÂåñË∑ØÂæÑ\n          this._visualizePath(this.optimalPath);\n          \n          // ËÆ°ÁÆó‰ºòÂåñÊåáÊ†á\n          const metrics = this._calculatePathMetrics(this.optimalPath);\n          \n          resolve({\n            path: this.optimalPath,\n            metrics: metrics,\n            success: true\n          });\n        }, 2000); // Ê®°Êãü2ÁßíÁöÑAIËÆ°ÁÆóÊó∂Èó¥\n      } catch (error) {\n        console.error('Ë∑ØÂæÑËßÑÂàíÂ§±Ë¥•:', error);\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * ‰ªéÂ§öËæπÂΩ¢È°∂ÁÇπÁîüÊàêÂü∫Á°ÄË∑ØÂæÑ\n   * @private\n   */\n  _generateBasePathFromVertices(vertices) {\n    // ÁÆÄÂåñÂÆûÁé∞ÔºöÁîüÊàêÂπ≥Ë°å‰∫éÈïøËæπÁöÑËà™Á∫ø\n    // ÂÆûÈôÖÂÆûÁé∞‰∏≠Â∫îËØ•‰ΩøÁî®Êõ¥Â§çÊùÇÁöÑÁÆóÊ≥ïÂ¶ÇBoustrophedonÊ®°Âºè\n    const path = [];\n    \n    // ÊâæÂà∞Â§öËæπÂΩ¢ÁöÑËæπÁïåÊ°Ü\n    let minLat = Infinity, maxLat = -Infinity;\n    let minLng = Infinity, maxLng = -Infinity;\n    \n    vertices.forEach(vertex => {\n      minLat = Math.min(minLat, vertex[0]);\n      maxLat = Math.max(maxLat, vertex[0]);\n      minLng = Math.min(minLng, vertex[1]);\n      maxLng = Math.max(maxLng, vertex[1]);\n    });\n    \n    // Á°ÆÂÆöÈïøËæπÊñπÂêë\n    const latDiff = maxLat - minLat;\n    const lngDiff = maxLng - minLng;\n    \n    if (latDiff > lngDiff) {\n      // ÂçóÂåóÊñπÂêë‰∏∫ÈïøËæπÔºåÁîüÊàê‰∏úË•øÂêëËà™Á∫ø\n      // 10Êù°Ëà™Á∫ø\n      for (let i = 0; i <= 10; i++) {\n        const lng = minLng + (lngDiff * i / 10);\n        path.push([minLat, lng]);\n        path.push([maxLat, lng]);\n      }\n    } else {\n      // ‰∏úË•øÊñπÂêë‰∏∫ÈïøËæπÔºåÁîüÊàêÂçóÂåóÂêëËà™Á∫ø\n      // 10Êù°Ëà™Á∫ø\n      for (let i = 0; i <= 10; i++) {\n        const lat = minLat + (latDiff * i / 10);\n        path.push([lat, minLng]);\n        path.push([lat, maxLng]);\n      }\n    }\n    \n    return path;\n  }\n\n  /**\n   * Ê†πÊçÆ‰ΩúÁâ©Á±ªÂûãË∞ÉÊï¥Ë∑ØÂæÑÈó¥Ë∑ù\n   * @private\n   */\n  _adjustPathForCropType(path, cropType) {\n    // Ê†πÊçÆ‰∏çÂêå‰ΩúÁâ©Á±ªÂûãË∞ÉÊï¥Ë∑ØÂæÑÂèÇÊï∞\n    // ‰æãÂ¶ÇÔºöÈ´òÁßÜ‰ΩúÁâ©ÈúÄË¶ÅÊõ¥Â§ßÁöÑÈó¥Ë∑ùÔºåÂØÜÈõÜÁßçÊ§ç‰ΩúÁâ©ÈúÄË¶ÅÊõ¥ÂØÜÈõÜÁöÑËà™Á∫ø\n    const cropPathAdjustments = {\n      'Â∞èÈ∫¶': { spacing: 1.2, overlap: 0.1 },\n      'Ê∞¥Á®ª': { spacing: 1.5, overlap: 0.15 },\n      'ÁéâÁ±≥': { spacing: 2.0, overlap: 0.2 },\n      'ÊûúÊ†ë': { spacing: 3.0, overlap: 0.25 }\n    };\n    \n    // Â¶ÇÊûúÊòØÊú™Áü•‰ΩúÁâ©Á±ªÂûãÔºå‰ΩøÁî®ÈªòËÆ§ÂÄº\n    const adjustment = cropPathAdjustments[cropType] || { spacing: 1.0, overlap: 0.1 };\n    \n    // ËøôÈáåÁÆÄÂåñÂ§ÑÁêÜÔºåÂÆûÈôÖÂ∫îËØ•Ê†πÊçÆË∞ÉÊï¥ÂèÇÊï∞ÈáçÊñ∞ËÆ°ÁÆóË∑ØÂæÑÁÇπ\n    console.log(`Ê†πÊçÆ‰ΩúÁâ©Á±ªÂûã ${cropType} Ë∞ÉÊï¥Ë∑ØÂæÑÔºåÈó¥Ë∑ùÂõ†Â≠ê: ${adjustment.spacing}, ÈáçÂè†Â∫¶: ${adjustment.overlap}`);\n    \n    return path;\n  }\n\n  /**\n   * Ê†πÊçÆÈ£éÂêë‰ºòÂåñË∑ØÂæÑ\n   * @private\n   */\n  _optimizePathByWind(path, environmentData) {\n    if (!environmentData || !environmentData.windSpeed || !environmentData.windDirection) {\n      return path;\n    }\n    \n    // Ê†πÊçÆÈ£éÂêëÂíåÈ£éÈÄüË∞ÉÊï¥Ë∑ØÂæÑËßíÂ∫¶ÔºåÂáèÂ∞ëÈ£éÈòª\n    console.log(`Ê†πÊçÆÈ£éÂêëË∞ÉÊï¥Ë∑ØÂæÑÔºåÈ£éÈÄü: ${environmentData.windSpeed} m/s, È£éÂêë: ${environmentData.windDirection}`);\n    \n    // ÂÆûÈôÖÂÆûÁé∞ÔºöÊ†πÊçÆÈ£éÂêëË∞ÉÊï¥Ë∑ØÂæÑËßíÂ∫¶\n    const windSpeed = environmentData.windSpeed;\n    const windDirection = environmentData.windDirection;\n    \n    // Âè™ÊúâÂú®È£éÈÄüÂ§ß‰∫é2m/sÊó∂ÊâçËøõË°åË∞ÉÊï¥\n    if (windSpeed < 2) {\n      return path;\n    }\n    \n    // Ê†πÊçÆÈ£éÂêëÂ∞ÜË∑ØÂæÑË∞ÉÊï¥‰∏∫È°∫È£éÊàñÈÄÜÈ£éÈ£ûË°å\n    const optimizedPath = [];\n    \n    // ÁÆÄÂçïÂÆûÁé∞ÔºöÂ∞ÜÁõ∏ÈÇªÁÇπÁöÑËøûÁ∫øË∞ÉÊï¥‰∏∫Êõ¥Êé•ËøëÈ°∫È£éÊñπÂêë\n    for (let i = 0; i < path.length - 1; i++) {\n      const point1 = path[i];\n      const point2 = path[i + 1];\n      \n      // Ê∑ªÂä†ÂéüÂßãËµ∑ÁÇπ\n      optimizedPath.push(point1);\n      \n      // ËÆ°ÁÆóÈ£éÂêëËßíÂ∫¶ÔºàÁÆÄÂåñÂ§ÑÁêÜÔºâ\n      const windAngle = this._getWindDirectionAngle(windDirection);\n      \n      // ËÆ°ÁÆóÂΩìÂâçË∑ØÂæÑÊÆµÁöÑËßíÂ∫¶\n      const pathAngle = this._calculateBearing(point1[0], point1[1], point2[0], point2[1]);\n      \n      // ËÆ°ÁÆóÂ§πËßí\n      const angleDiff = Math.abs(this._normalizeAngle(pathAngle - windAngle));\n      \n      // Â¶ÇÊûúÂ§πËßíËøáÂ§ßÔºàÊé•Ëøë90Â∫¶ÔºâÔºåÂ∞ùËØïË∞ÉÊï¥Ë∑ØÂæÑ\n      if (angleDiff > 60 && angleDiff < 120) {\n        // Ê∑ªÂä†‰∏Ä‰∏™‰∏≠Èó¥ÁÇπÊù•ÊîπÂèòË∑ØÂæÑËßíÂ∫¶Ôºå‰ΩøËà™Á∫øÊõ¥Êé•ËøëÈ°∫È£éÊàñÈÄÜÈ£é\n        const midLat = (point1[0] + point2[0]) / 2;\n        const midLng = (point1[1] + point2[1]) / 2;\n        \n        // Ê†πÊçÆÈ£éÈÄüË∞ÉÊï¥‰∏≠Èó¥ÁÇπÂÅèÁßªÈáè\n        const offset = (windSpeed - 2) * 0.0001; // È£éÈÄüË∂äÂ§ßÔºåÂÅèÁßªË∂äÂ§ß\n        const adjustedMidLat = midLat + offset * Math.sin(windAngle * Math.PI / 180);\n        const adjustedMidLng = midLng + offset * Math.cos(windAngle * Math.PI / 180);\n        \n        optimizedPath.push([adjustedMidLat, adjustedMidLng]);\n      }\n    }\n    \n    // Ê∑ªÂä†ÊúÄÂêé‰∏Ä‰∏™ÁÇπ\n    optimizedPath.push(path[path.length - 1]);\n    \n    return optimizedPath;\n  }\n\n  /**\n   * Ëé∑ÂèñÈ£éÂêëËßíÂ∫¶\n   * @private\n   * @param {string} windDirection - È£éÂêëÔºàN/S/E/WÁ≠âÔºâ\n   * @returns {number} ËßíÂ∫¶ÔºàÂ∫¶Ôºâ\n   */\n  _getWindDirectionAngle(windDirection) {\n    const directionMap = {\n      'N': 0,\n      'NNE': 22.5,\n      'NE': 45,\n      'ENE': 67.5,\n      'E': 90,\n      'ESE': 112.5,\n      'SE': 135,\n      'SSE': 157.5,\n      'S': 180,\n      'SSW': 202.5,\n      'SW': 225,\n      'WSW': 247.5,\n      'W': 270,\n      'WNW': 292.5,\n      'NW': 315,\n      'NNW': 337.5\n    };\n    \n    return directionMap[windDirection] || 0;\n  }\n\n  /**\n   * ËÆ°ÁÆó‰∏§ÁÇπÈó¥ÁöÑÊñπ‰ΩçËßí\n   * @private\n   */\n  _calculateBearing(lat1, lon1, lat2, lon2) {\n    const œÜ1 = lat1 * Math.PI / 180;\n    const œÜ2 = lat2 * Math.PI / 180;\n    const ŒîŒª = (lon2 - lon1) * Math.PI / 180;\n    \n    const y = Math.sin(ŒîŒª) * Math.cos(œÜ2);\n    const x = Math.cos(œÜ1) * Math.sin(œÜ2) - Math.sin(œÜ1) * Math.cos(œÜ2) * Math.cos(ŒîŒª);\n    const Œ∏ = Math.atan2(y, x);\n    \n    return ((Œ∏ * 180 / Math.PI) + 360) % 360;\n  }\n  \n  /**\n   * ÂΩí‰∏ÄÂåñËßíÂ∫¶Âà∞0-360Â∫¶\n   * @private\n   */\n  _normalizeAngle(angle) {\n    return ((angle % 360) + 360) % 360;\n  }\n\n  /**\n   * ÈöúÁ¢çÁâ©ÈÅøËÆ©\n   * @private\n   */\n  _avoidObstacles(path, obstacles) {\n    if (!obstacles || obstacles.length === 0) {\n      return path;\n    }\n    \n    console.log(`ÈÅøÂºÄ ${obstacles.length} ‰∏™ÈöúÁ¢çÁâ©`);\n    \n    // ÂÆûÈôÖÂÆûÁé∞ÔºöÊ£ÄÊµãË∑ØÂæÑ‰∏éÈöúÁ¢çÁâ©ÁöÑÁ¢∞ÊíûÔºåÂπ∂ËøõË°åË∑ØÂæÑË∞ÉÊï¥\n    const obstacleAvoidedPath = [];\n    \n    for (let i = 0; i < path.length - 1; i++) {\n      const startPoint = path[i];\n      const endPoint = path[i + 1];\n      \n      // Ê£ÄÊü•ÂΩìÂâçË∑ØÂæÑÊÆµÊòØÂê¶‰∏é‰ªª‰ΩïÈöúÁ¢çÁâ©Áõ∏‰∫§\n      let hasCollision = false;\n      let collisionObstacle = null;\n      \n      for (const obstacle of obstacles) {\n        if (this._checkPathObstacleCollision(startPoint, endPoint, obstacle)) {\n          hasCollision = true;\n          collisionObstacle = obstacle;\n          break;\n        }\n      }\n      \n      // Ê∑ªÂä†Ëµ∑ÁÇπ\n      obstacleAvoidedPath.push(startPoint);\n      \n      // Â¶ÇÊûúÊúâÁ¢∞ÊíûÔºåÁîüÊàêÈÅøÈöúË∑ØÂæÑ\n      if (hasCollision) {\n        const detourPoints = this._generateDetour(startPoint, endPoint, collisionObstacle);\n        obstacleAvoidedPath.push(...detourPoints);\n      }\n    }\n    \n    // Ê∑ªÂä†ÊúÄÂêé‰∏Ä‰∏™ÁÇπ\n    obstacleAvoidedPath.push(path[path.length - 1]);\n    \n    return obstacleAvoidedPath;\n  }\n  \n  /**\n   * Ê£ÄÊü•Ë∑ØÂæÑÊÆµÊòØÂê¶‰∏éÈöúÁ¢çÁâ©Á¢∞Êíû\n   * @private\n   */\n  _checkPathObstacleCollision(startPoint, endPoint, obstacle) {\n    // ÁÆÄÂåñÁöÑÁ¢∞ÊíûÊ£ÄÊµãÔºöÊ£ÄÊü•Ë∑ØÂæÑÊÆµÊòØÂê¶‰∏éÂúÜÂΩ¢ÈöúÁ¢çÁâ©Áõ∏‰∫§\n    // ÂÅáËÆæÈöúÁ¢çÁâ©ÊòØÂúÜÂΩ¢ÁöÑÔºåÊúâ‰∏≠ÂøÉÁÇπÂíåÂçäÂæÑ\n    if (!obstacle.center || !obstacle.radius) {\n      // Â¶ÇÊûúÈöúÁ¢çÁâ©Ê†ºÂºè‰∏çÊ≠£Á°ÆÔºåÈªòËÆ§‰∏çÊ£ÄÊµãÁ¢∞Êíû\n      return false;\n    }\n    \n    const obstacleCenter = obstacle.center;\n    const radius = obstacle.radius; // Á±≥\n    \n    // Â∞ÜÁ±≥ËΩ¨Êç¢‰∏∫ÁªèÁ∫¨Â∫¶Â∑ÆÂÄºÔºàËøë‰ººÂÄºÔºåÈÄÇÁî®‰∫éÂ∞èËåÉÂõ¥Ôºâ\n    const radiusInDegrees = radius / 111000; // 1Â∫¶Á∫¶Á≠â‰∫é111ÂÖ¨Èáå\n    \n    // ËÆ°ÁÆóÁÇπÂà∞Á∫øÊÆµÁöÑË∑ùÁ¶ª\n    const distance = this._calculateDistanceToSegment(\n      startPoint[0], startPoint[1],\n      endPoint[0], endPoint[1],\n      obstacleCenter[0], obstacleCenter[1]\n    );\n    \n    // Â¶ÇÊûúË∑ùÁ¶ªÂ∞è‰∫éÈöúÁ¢çÁâ©ÂçäÂæÑÔºåÂàôËÆ§‰∏∫ÂèëÁîüÁ¢∞Êíû\n    return distance < radiusInDegrees;\n  }\n  \n  /**\n   * ËÆ°ÁÆóÁÇπÂà∞Á∫øÊÆµÁöÑË∑ùÁ¶ªÔºàÁÆÄÂåñÁöÑ‰∫åÁª¥ËÆ°ÁÆóÔºâ\n   * @private\n   */\n  _calculateDistanceToSegment(x1, y1, x2, y2, x0, y0) {\n    // Á∫øÊÆµËµ∑ÁÇπÂà∞ÁªàÁÇπÁöÑÂêëÈáè\n    const A = x0 - x1;\n    const B = y0 - y1;\n    const C = x2 - x1;\n    const D = y2 - y1;\n    \n    const dot = A * C + B * D;\n    const lenSq = C * C + D * D;\n    let param = -1;\n    \n    if (lenSq !== 0) {\n      param = dot / lenSq;\n    }\n    \n    let xx, yy;\n    \n    if (param < 0) {\n      xx = x1;\n      yy = y1;\n    } else if (param > 1) {\n      xx = x2;\n      yy = y2;\n    } else {\n      xx = x1 + param * C;\n      yy = y1 + param * D;\n    }\n    \n    const dx = x0 - xx;\n    const dy = y0 - yy;\n    \n    return Math.sqrt(dx * dx + dy * dy);\n  }\n  \n  /**\n   * ÁîüÊàêÈÅøÈöúÁªïÈÅìË∑ØÂæÑ\n   * @private\n   */\n  _generateDetour(startPoint, endPoint, obstacle) {\n    // ÁÆÄÂåñÂÆûÁé∞ÔºöÁîüÊàê‰∏Ä‰∏™ÁªïËøáÈöúÁ¢çÁâ©ÁöÑË∑ØÂæÑ\n    // Âú®ÈöúÁ¢çÁâ©Âë®Âõ¥ÁîüÊàê‰∏§‰∏™ÁÇπÔºåÂΩ¢Êàê‰∏Ä‰∏™ÂçäÂúÜÁªïË°å\n    const detourPoints = [];\n    const center = obstacle.center;\n    const radius = obstacle.radius / 111000; // ËΩ¨Êç¢‰∏∫Â∫¶Êï∞\n    \n    // ËÆ°ÁÆóÈöúÁ¢çÁâ©‰∏≠ÂøÉÂà∞Ëµ∑ÁÇπÂíåÁªàÁÇπÁöÑÂêëÈáè\n    const vectorToStart = [\n      startPoint[0] - center[0],\n      startPoint[1] - center[1]\n    ];\n    const vectorToEnd = [\n      endPoint[0] - center[0],\n      endPoint[1] - center[1]\n    ];\n    \n    // ÂΩí‰∏ÄÂåñÂêëÈáè\n    const normalizeVector = (vec) => {\n      const len = Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\n      return [vec[0] / len, vec[1] / len];\n    };\n    \n    const normStart = normalizeVector(vectorToStart);\n    const normEnd = normalizeVector(vectorToEnd);\n    \n    // ËÆ°ÁÆóÂûÇÁõ¥ÊñπÂêëÔºàÈ°∫Êó∂ÈíàÊñπÂêëÁªïË°åÔºâ\n    const perpendicular1 = [-normStart[1], normStart[0]];\n    const perpendicular2 = [-normEnd[1], normEnd[0]];\n    \n    // ËÆ°ÁÆóÁªïË°åÁÇπ\n    const detourPoint1 = [\n      center[0] + normStart[0] * (radius * 1.2) + perpendicular1[0] * (radius * 1.2),\n      center[1] + normStart[1] * (radius * 1.2) + perpendicular1[1] * (radius * 1.2)\n    ];\n    \n    const detourPoint2 = [\n      center[0] + normEnd[0] * (radius * 1.2) + perpendicular2[0] * (radius * 1.2),\n      center[1] + normEnd[1] * (radius * 1.2) + perpendicular2[1] * (radius * 1.2)\n    ];\n    \n    detourPoints.push(detourPoint1);\n    detourPoints.push(detourPoint2);\n    \n    return detourPoints;\n  }\n\n  /**\n   * ‰ºòÂåñË∑ØÂæÑÊïàÁéá\n   * @private\n   */\n  _optimizePathEfficiency(path, droneData) {\n    // Â∫îÁî®ÁÆÄÂåñÁöÑË∑ØÂæÑ‰ºòÂåñÁÆóÊ≥ï\n    console.log('‰ºòÂåñË∑ØÂæÑÊïàÁéáÔºåÂáèÂ∞ëËΩ¨ÊäòÂíåÊÄªË∑ùÁ¶ª');\n    \n    // 1. ÁßªÈô§‰∏çÂøÖË¶ÅÁöÑÁÇπÔºàÂ¶ÇÊûúËøûÁª≠‰∏âÁÇπÂá†‰πéÂú®Âêå‰∏ÄÁõ¥Á∫ø‰∏äÔºâ\n    const simplifiedPath = this._simplifyPath(path, 0.00001); // ÁÆÄÂåñÈòàÂÄº\n    \n    // 2. Âπ≥ÊªëË∑ØÂæÑ‰∏≠ÁöÑÈîêËßíÔºåÂáèÂ∞ëÊó†‰∫∫Êú∫ÊÄ•ËΩ¨ÂºØ\n    const smoothedPath = this._smoothPath(simplifiedPath, droneData);\n    \n    return smoothedPath;\n  }\n  \n  /**\n   * ÁÆÄÂåñË∑ØÂæÑÔºåÁßªÈô§ÂÜó‰ΩôÁÇπ\n   * @private\n   */\n  _simplifyPath(path, tolerance) {\n    if (path.length <= 2) return path;\n    \n    const simplified = [path[0]];\n    \n    for (let i = 1; i < path.length - 1; i++) {\n      const prevPoint = path[i - 1];\n      const currPoint = path[i];\n      const nextPoint = path[i + 1];\n      \n      // ËÆ°ÁÆóÂΩìÂâçÁÇπÂà∞ÂâçÂêé‰∏§ÁÇπËøûÁ∫øÁöÑË∑ùÁ¶ª\n      const distance = this._calculateDistanceToSegment(\n        prevPoint[0], prevPoint[1],\n        nextPoint[0], nextPoint[1],\n        currPoint[0], currPoint[1]\n      );\n      \n      // Â¶ÇÊûúË∑ùÁ¶ªÂ§ß‰∫éÈòàÂÄºÔºå‰øùÁïôËØ•ÁÇπ\n      if (distance > tolerance) {\n        simplified.push(currPoint);\n      }\n    }\n    \n    // Ê∑ªÂä†ÊúÄÂêé‰∏Ä‰∏™ÁÇπ\n    simplified.push(path[path.length - 1]);\n    \n    return simplified;\n  }\n  \n  /**\n   * Âπ≥ÊªëË∑ØÂæÑÔºåÂáèÂ∞ëÊÄ•ËΩ¨ÂºØ\n   * @private\n   */\n  _smoothPath(path, droneData) {\n    if (path.length <= 2) return path;\n    \n    const maxTurnAngle = droneData.maxTurnAngle || 30; // ÊúÄÂ§ßËΩ¨ÂêëËßíÂ∫¶ÔºåÈªòËÆ§‰∏∫30Â∫¶\n    const smoothed = [];\n    \n    // ‰øùÁïôËµ∑ÁÇπ\n    smoothed.push(path[0]);\n    \n    for (let i = 1; i < path.length - 1; i++) {\n      const prevPoint = path[i - 1];\n      const currPoint = path[i];\n      const nextPoint = path[i + 1];\n      \n      // ËÆ°ÁÆó‰∏§‰∏™Ë∑ØÂæÑÊÆµÁöÑÂ§πËßí\n      const angle1 = this._calculateBearing(prevPoint[0], prevPoint[1], currPoint[0], currPoint[1]);\n      const angle2 = this._calculateBearing(currPoint[0], currPoint[1], nextPoint[0], nextPoint[1]);\n      const turnAngle = Math.abs(this._normalizeAngle(angle1 - angle2));\n      \n      // Â¶ÇÊûúËΩ¨ÂêëËßíÂ∫¶ËøáÂ§ßÔºåÊèíÂÖ•Âπ≥ÊªëÁÇπ\n      if (turnAngle > maxTurnAngle) {\n        // ËÆ°ÁÆóÈúÄË¶ÅÊèíÂÖ•ÁöÑÂπ≥ÊªëÁÇπ\n        const midPoint1 = [\n          (prevPoint[0] + currPoint[0]) / 2,\n          (prevPoint[1] + currPoint[1]) / 2\n        ];\n        \n        const midPoint2 = [\n          (currPoint[0] + nextPoint[0]) / 2,\n          (currPoint[1] + nextPoint[1]) / 2\n        ];\n        \n        smoothed.push(midPoint1);\n        smoothed.push(currPoint);\n        smoothed.push(midPoint2);\n      } else {\n        smoothed.push(currPoint);\n      }\n    }\n    \n    // Ê∑ªÂä†ÊúÄÂêé‰∏Ä‰∏™ÁÇπ\n    smoothed.push(path[path.length - 1]);\n    \n    return smoothed;\n  }\n\n  /**\n   * ËÆ°ÁÆóË∑ØÂæÑÊåáÊ†á\n   * @private\n   */\n  _calculatePathMetrics(path) {\n    if (!path || path.length < 2) {\n      return { totalDistance: 0, estimatedTime: 0 };\n    }\n    \n    let totalDistance = 0;\n    \n    // ËÆ°ÁÆóË∑ØÂæÑÊÄªË∑ùÁ¶ªÔºàÁÆÄÂåñ‰∏∫Áõ¥Á∫øË∑ùÁ¶ªÔºâ\n    for (let i = 1; i < path.length; i++) {\n      const prevPoint = path[i-1];\n      const currPoint = path[i];\n      // ‰ΩøÁî®HaversineÂÖ¨ÂºèËÆ°ÁÆó‰∏§ÁÇπÈó¥Ë∑ùÁ¶ª\n      totalDistance += this._calculateDistance(prevPoint[0], prevPoint[1], currPoint[0], currPoint[1]);\n    }\n    \n    // ‰º∞ÁÆóÈ£ûË°åÊó∂Èó¥ÔºàÂÅáËÆæÂπ≥ÂùáÈÄüÂ∫¶‰∏∫5m/sÔºâ\n    const estimatedTime = totalDistance / 5; // Áßí\n    \n    return {\n      totalDistance: Math.round(totalDistance), // Á±≥\n      estimatedTime: Math.round(estimatedTime), // Áßí\n      waypoints: path.length,\n      estimatedEfficiency: this._calculateEfficiency(path)\n    };\n  }\n\n  /**\n   * ËÆ°ÁÆó‰∏§ÁÇπÈó¥Ë∑ùÁ¶ªÔºàHaversineÂÖ¨ÂºèÔºâ\n   * @private\n   */\n  _calculateDistance(lat1, lon1, lat2, lon2) {\n    const R = 6371e3; // Âú∞ÁêÉÂçäÂæÑÔºàÁ±≥Ôºâ\n    const œÜ1 = lat1 * Math.PI/180;\n    const œÜ2 = lat2 * Math.PI/180;\n    const ŒîœÜ = (lat2-lat1) * Math.PI/180;\n    const ŒîŒª = (lon2-lon1) * Math.PI/180;\n\n    const a = Math.sin(ŒîœÜ/2) * Math.sin(ŒîœÜ/2) +\n              Math.cos(œÜ1) * Math.cos(œÜ2) *\n              Math.sin(ŒîŒª/2) * Math.sin(ŒîŒª/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n    return R * c;\n  }\n\n  /**\n   * ËÆ°ÁÆóË∑ØÂæÑÊïàÁéá\n   * @private\n   */\n  _calculateEfficiency(path) {\n    // Âü∫‰∫éÂ§ö‰∏™Âõ†Á¥†ËÆ°ÁÆóË∑ØÂæÑÊïàÁéá\n    if (!path || path.length < 2) return 0;\n    \n    // 1. ËÆ°ÁÆóÊÄªË∑ùÁ¶ª\n    let totalDistance = 0;\n    for (let i = 1; i < path.length; i++) {\n      totalDistance += this._calculateDistance(\n        path[i-1][0], path[i-1][1],\n        path[i][0], path[i][1]\n      );\n    }\n    \n    // 2. ËÆ°ÁÆóËΩ¨ÊäòÁÇπÊï∞ÈáèÂíåËßíÂ∫¶\n    let totalTurnAngle = 0;\n    let turnCount = 0;\n    \n    for (let i = 1; i < path.length - 1; i++) {\n      const angle1 = this._calculateBearing(\n        path[i-1][0], path[i-1][1],\n        path[i][0], path[i][1]\n      );\n      \n      const angle2 = this._calculateBearing(\n        path[i][0], path[i][1],\n        path[i+1][0], path[i+1][1]\n      );\n      \n      const turnAngle = Math.abs(this._normalizeAngle(angle1 - angle2));\n      \n      if (turnAngle > 5) { // ÂøΩÁï•ÂæàÂ∞èÁöÑËßíÂ∫¶ÂèòÂåñ\n        totalTurnAngle += turnAngle;\n        turnCount++;\n      }\n    }\n    \n    // 3. ËÆ°ÁÆóÂπ≥ÂùáËΩ¨ÂêëËßíÂ∫¶\n    const avgTurnAngle = turnCount > 0 ? totalTurnAngle / turnCount : 0;\n    \n    // 4. ËÆ°ÁÆóÊïàÁéáÂàÜÊï∞ÔºàÂü∫‰∫éË∑ùÁ¶ª„ÄÅËΩ¨ÂêëËßíÂ∫¶Á≠âÂõ†Á¥†Ôºâ\n    // Âü∫Á°ÄÊïàÁéáÂàÜÔºö100ÂàÜ\n    let efficiency = 100;\n    \n    // Ë∑ùÁ¶ªÊÉ©ÁΩöÔºöË∑ùÁ¶ªË∂äÈïøÔºåÊïàÁéáË∂ä‰ΩéÔºàÂü∫‰∫éÂÅáËÆæÁöÑÊúÄ‰ºòË∑ùÁ¶ªÔºâ\n    const baseEstimatedDistance = this._calculateEstimatedOptimalDistance();\n    if (baseEstimatedDistance > 0 && totalDistance > baseEstimatedDistance) {\n      const distanceFactor = Math.min(totalDistance / baseEstimatedDistance, 2); // ÊúÄÂ§öÈôç‰Ωé50%\n      efficiency *= (2 - distanceFactor) * 0.5 + 0.5;\n    }\n    \n    // ËΩ¨ÂêëÊÉ©ÁΩöÔºöËΩ¨ÂêëËßíÂ∫¶Ë∂äÂ§ßÔºåÊïàÁéáË∂ä‰Ωé\n    if (avgTurnAngle > 0) {\n      const turnPenalty = Math.min(avgTurnAngle / 180, 0.3); // ÊúÄÂ§ß30%ÊÉ©ÁΩö\n      efficiency *= (1 - turnPenalty);\n    }\n    \n    // Á°Æ‰øùÊïàÁéáÂú®0-100‰πãÈó¥\n    return Math.max(0, Math.min(100, efficiency));\n  }\n  \n  /**\n   * ‰º∞ÁÆóÊúÄ‰ºòË∑ùÁ¶ªÔºàÁÆÄÂåñÂÆûÁé∞Ôºâ\n   * @private\n   */\n  _calculateEstimatedOptimalDistance() {\n    // ËøôÈáåÂ∫îËØ•Âü∫‰∫éÂÜúÁî∞ÂΩ¢Áä∂ÂíåÂ§ßÂ∞è‰º∞ÁÆóÊúÄ‰ºòË∑ùÁ¶ª\n    // ÁÆÄÂåñÂÆûÁé∞ÔºöËøîÂõû‰∏Ä‰∏™ÂêàÁêÜÁöÑÂü∫Á°ÄÂÄº\n    return 1000; // ÈªòËÆ§1000Á±≥\n  }\n\n  /**\n   * ÂèØËßÜÂåñË∑ØÂæÑ\n   * @param {Array} path - Ë∑ØÂæÑÁÇπÊï∞ÁªÑ\n   */\n  _visualizePath(path) {\n    try {\n      // Â¢ûÂº∫ÁöÑÂÆâÂÖ®Ê£ÄÊü•\n      if (!path || !Array.isArray(path) || path.length < 2) {\n        console.warn('Ë∑ØÂæÑÂèØËßÜÂåñÂ§±Ë¥•ÔºöÊó†ÊïàÁöÑË∑ØÂæÑÊï∞ÊçÆ');\n        return;\n      }\n      \n      // ‰ΩøÁî®Êõ¥ÂÆâÂÖ®ÁöÑwindow.LÂºïÁî®ÊñπÂºè\n      const Leaflet = window.L || L;\n      \n      // Ê£ÄÊü•LeafletÊòØÂê¶Â≠òÂú®‰∏îÂèØÁî®\n      if (!Leaflet || typeof Leaflet !== 'object' || typeof Leaflet.polyline !== 'function') {\n        console.warn('Ë∑ØÂæÑÂèØËßÜÂåñÂ§±Ë¥•ÔºöLeafletÂ∫ìÊú™Ê≠£Á°ÆÂä†ËΩΩ');\n        return;\n      }\n      \n      // ‰∏ç‰æùËµñthis.pathLayerÔºåÁõ¥Êé•‰ΩøÁî®Âú∞ÂõæÂÆû‰æãÂ§ÑÁêÜ\n      if (!this.map || typeof this.map !== 'object') {\n        console.warn('Ë∑ØÂæÑÂèØËßÜÂåñÂ§±Ë¥•ÔºöÂú∞ÂõæÂÆû‰æã‰∏çÂ≠òÂú®ÊàñÊó†Êïà');\n        return;\n      }\n      \n      // Ê∏ÖÈô§‰πãÂâçÂèØËÉΩÂ≠òÂú®ÁöÑË∑ØÂæÑÔºà‰ΩøÁî®Êõ¥ÂÆâÂÖ®ÁöÑÊñπÂºèÔºâ\n      if (this.currentPathLayer) {\n        try {\n          if (typeof this.currentPathLayer.remove === 'function') {\n            this.currentPathLayer.remove();\n          } else if (this.map && typeof this.map.removeLayer === 'function') {\n            this.map.removeLayer(this.currentPathLayer);\n          }\n        } catch (removeError) {\n          console.warn('ÁßªÈô§ÊóßË∑ØÂæÑÂõæÂ±ÇÂ§±Ë¥•:', removeError);\n        }\n        this.currentPathLayer = null;\n      }\n      \n      // ÂàõÂª∫Êñ∞ÁöÑË∑ØÂæÑÂõæÂ±Ç\n      if (Leaflet && typeof Leaflet.layerGroup === 'function') {\n        try {\n          this.currentPathLayer = Leaflet.layerGroup();\n          // ÂÆâÂÖ®Âú∞Ê∑ªÂä†ÂõæÂ±ÇÂà∞Âú∞Âõæ\n          if (typeof this.map.addLayer === 'function') {\n            this.map.addLayer(this.currentPathLayer);\n          }\n        } catch (layerError) {\n          console.error('ÂàõÂª∫Ë∑ØÂæÑÂõæÂ±ÇÂ§±Ë¥•:', layerError);\n          // Â¶ÇÊûúÂàõÂª∫ÂõæÂ±ÇÂ§±Ë¥•ÔºåÂ∞±‰∏çÁªßÁª≠Â∞ùËØïÊ∑ªÂä†Ê†áËÆ∞\n          return;\n        }\n      }\n      \n      // ÂàõÂª∫Ë∑ØÂæÑÁ∫øÊù°\n      try {\n        const pathLine = Leaflet.polyline(path, {\n          color: '#ff5722',\n          weight: 4,\n          opacity: 0.8,\n          dashArray: '10, 5'\n        });\n        \n        // ÂÆâÂÖ®Âú∞Ê∑ªÂä†Á∫øÊù°Âà∞ÂõæÂ±Ç\n        if (this.currentPathLayer && typeof this.currentPathLayer.addLayer === 'function') {\n          this.currentPathLayer.addLayer(pathLine);\n        } else if (typeof this.map.addLayer === 'function') {\n          this.map.addLayer(pathLine);\n        }\n        \n        // ÂÆâÂÖ®Âú∞Â§ÑÁêÜÂú∞ÂõæËßÜÈáéË∞ÉÊï¥\n        try {\n          // ÁßªÈô§ÂèØËÉΩÂØºËá¥_latLngToNewLayerPointÈîôËØØÁöÑfitBoundsÂíåsetViewÊìç‰Ωú\n          // ÂÆåÂÖ®ÈÅøÂÖçÂØπÂú∞ÂõæËßÜÂõæÁöÑËá™Âä®Ë∞ÉÊï¥ÔºåÂáèÂ∞ëÈîôËØØÂèØËÉΩÊÄß\n        } catch (boundsError) {\n          console.warn('Ë∞ÉÊï¥Âú∞ÂõæËßÜÈáéÊó∂Âá∫Èîô:', boundsError);\n        }\n      } catch (lineError) {\n        console.error('ÂàõÂª∫Ë∑ØÂæÑÁ∫øÊù°Â§±Ë¥•:', lineError);\n      }\n      \n      console.log('Ë∑ØÂæÑÂèØËßÜÂåñÂÆåÊàê');\n    } catch (error) {\n      console.error('Ë∑ØÂæÑÂèØËßÜÂåñËøáÁ®ã‰∏≠ÂèëÁîüÈîôËØØ:', error);\n    }\n  }\n\n  /**\n   * Êèê‰æõ3DÈ¢ÑËßàÊï∞ÊçÆ\n   * @returns {Object} 3DÈ¢ÑËßàÊâÄÈúÄÁöÑÊï∞ÊçÆ\n   */\n  get3DPreviewData() {\n    return {\n      path: this.optimalPath,\n      metadata: {\n        version: '1.0',\n        generatedAt: new Date().toISOString()\n      }\n    };\n  }\n\n  /**\n   * Ê∏ÖÈô§Ë∑ØÂæÑÊòæÁ§∫\n   */\n  clearPath() {\n    // ‰øÆÂ§çÂõæÂ±ÇÂºïÁî®ÈîôËØØÔºå‰ΩøÁî®Ê≠£Á°ÆÁöÑcurrentPathLayer\n    if (this.currentPathLayer) {\n      try {\n        if (typeof this.currentPathLayer.clearLayers === 'function') {\n          this.currentPathLayer.clearLayers();\n        } else if (this.map && typeof this.map.removeLayer === 'function') {\n          this.map.removeLayer(this.currentPathLayer);\n        }\n        this.currentPathLayer = null;\n      } catch (error) {\n        console.warn('Ê∏ÖÈô§Ë∑ØÂæÑÂõæÂ±ÇÂ§±Ë¥•:', error);\n      }\n    }\n    this.optimalPath = [];\n  }\n\n  /**\n   * ÂØºÂá∫Ë∑ØÂæÑÊï∞ÊçÆ\n   * @param {string} format - ÂØºÂá∫Ê†ºÂºè\n   * @returns {Object|string} ÂØºÂá∫ÁöÑÊï∞ÊçÆ\n   */\n  exportPath(format = 'json') {\n    if (format === 'json') {\n      return JSON.stringify({\n        path: this.optimalPath,\n        metrics: this._calculatePathMetrics(this.optimalPath)\n      }, null, 2);\n    }\n    // ÂèØÊâ©Â±ïÂÖ∂‰ªñÊ†ºÂºèÂ¶ÇKML„ÄÅGPXÁ≠â\n    return null;\n  }\n}\n\n// ÂØºÂá∫Âçï‰æãÂÆû‰æã\nexport default new AIRoutePlanningService();","import { render } from \"./DashboardMap.vue?vue&type=template&id=132faa90&scoped=true\"\nimport script from \"./DashboardMap.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardMap.vue?vue&type=script&lang=js\"\n\nimport \"./DashboardMap.vue?vue&type=style&index=0&id=132faa90&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-132faa90\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_normalizeClass","active","$data","showCropHealth","onClick","_cache","args","$options","toggleCropHealth","showDronePaths","toggleDronePaths","showPestAreas","togglePestAreas","_hoisted_4","isSelectingArea","toggleAreaSelection","isEditingPath","togglePathEdit","toggleManualPathPlanning","_hoisted_5","generateOptimalPath","executeTask","_hoisted_6","_hoisted_7","id","_hoisted_8","_hoisted_9","cancelAreaSelection","_hoisted_10","_hoisted_11","cancelPathEdit","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_toDisplayString","selectedArea","area","_hoisted_17","_hoisted_18","perimeter","_hoisted_19","_hoisted_20","avgHeight","_hoisted_21","_hoisted_22","cropType","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","environmentData","temperature","_hoisted_28","_hoisted_29","_hoisted_30","humidity","_hoisted_31","_hoisted_32","_hoisted_33","windSpeed","_hoisted_34","_hoisted_35","_hoisted_36","precipitation","fetchEnvironmentData","_hoisted_37","_hoisted_38","analyzeCropHealth","analyzeSoilCondition","predictHarvest","optimizeIrrigation","showResultModal","_hoisted_39","_hoisted_40","_hoisted_41","resultModalTitle","_hoisted_42","resultModalMessage","_hoisted_43","closeResultModal","AIRoutePlanningService","constructor","this","optimalPath","map","pathLayer","initialize","console","error","Leaflet","window","L","layerGroup","currentPathLayer","remove","removeLayer","removeError","warn","addLayer","layerError","log","init","mapInstance","generateOptimalRoute","farmlandData","vertices","droneData","Promise","resolve","reject","setTimeout","initialPath","_generateBasePathFromVertices","adjustedPath","_adjustPathForCropType","windOptimizedPath","_optimizePathByWind","obstacleAvoidedPath","_avoidObstacles","obstacles","_optimizePathEfficiency","_visualizePath","metrics","_calculatePathMetrics","path","success","minLat","Infinity","maxLat","minLng","maxLng","forEach","vertex","Math","min","max","latDiff","lngDiff","i","lng","push","lat","cropPathAdjustments","spacing","overlap","adjustment","windDirection","optimizedPath","length","point1","point2","windAngle","_getWindDirectionAngle","pathAngle","_calculateBearing","angleDiff","abs","_normalizeAngle","midLat","midLng","offset","adjustedMidLat","sin","PI","adjustedMidLng","cos","directionMap","lat1","lon1","lat2","lon2","œÜ1","œÜ2","ŒîŒª","y","x","Œ∏","atan2","angle","startPoint","endPoint","hasCollision","collisionObstacle","obstacle","_checkPathObstacleCollision","detourPoints","_generateDetour","center","radius","obstacleCenter","radiusInDegrees","distance","_calculateDistanceToSegment","x1","y1","x2","y2","x0","y0","A","B","C","D","dot","lenSq","xx","yy","param","dx","dy","sqrt","vectorToStart","vectorToEnd","normalizeVector","vec","len","normStart","normEnd","perpendicular1","perpendicular2","detourPoint1","detourPoint2","simplifiedPath","_simplifyPath","smoothedPath","_smoothPath","tolerance","simplified","prevPoint","currPoint","nextPoint","maxTurnAngle","smoothed","angle1","angle2","turnAngle","midPoint1","midPoint2","totalDistance","estimatedTime","_calculateDistance","round","waypoints","estimatedEfficiency","_calculateEfficiency","R","ŒîœÜ","a","c","totalTurnAngle","turnCount","avgTurnAngle","efficiency","baseEstimatedDistance","_calculateEstimatedOptimalDistance","distanceFactor","turnPenalty","Array","isArray","polyline","pathLine","color","weight","opacity","dashArray","lineError","get3DPreviewData","metadata","version","generatedAt","Date","toISOString","clearPath","clearLayers","exportPath","format","JSON","stringify","name","data","pathService","isDrawingPath","drawnItems","currentPath","selectedVertices","operationWidth","mounted","initializeMap","methods","tileLayer","zoom","mapElement","document","getElementById","zoomControl","attributionControl","editable","setView","gaodeSatellite","subdomains","attribution","crossOrigin","maxZoom","errorTileUrl","gaodeRoad","satelliteWithRoads","baseLayers","control","layers","addTo","e","pathServiceError","initializeMapFeatures","featureGroup","addDemoFarmland","polygon","farmlands","properties","style","fillColor","fillOpacity","farmlandLayers","farmland","on","Object","values","layer","setStyle","_originalColor","bindPopup","enableAreaSelection","polygonPoints","tempPolygon","self","onMapClick","latlng","marker","err","onMapDblClick","calculateArea","calculatePerimeter","toFixed","off","points","latLngBounds","bounds","getCenter","ne","getNorthEast","calculateDistance","pow","earthRadius","p1","p2","latLng","latLng1","latLng2","distanceTo","updateMapLayers","result","polylineError","message","handleMapZoom","__exports__","render"],"sourceRoot":""}