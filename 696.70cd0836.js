"use strict";(self["webpackChunkfarmland_drone_dashboard"]=self["webpackChunkfarmland_drone_dashboard"]||[]).push([[696],{3696:function(a,e,s){s.r(e),s.d(e,{default:function(){return C}});var d=s(6768),l=s(4232),i=s(5130);const n={class:"field-analysis-container"},t={class:"analysis-content"},r={class:"upload-section"},c={key:0,class:"placeholder-content"},o={key:1,class:"file-preview"},v={class:"file-info"},p=["disabled"],u={key:0,class:"workbench"},f={class:"workbench-layout"},h={class:"layer-control"},k={class:"layer-list"},b={class:"layer-item"},y={class:"layer-item"},m={class:"layer-item"},L={class:"analysis-panel"},g={class:"prescription-card"};function w(a,e,s,w,D,I){return(0,d.uX)(),(0,d.CE)("div",n,[e[22]||(e[22]=(0,d.Lk)("div",{class:"section-header"},[(0,d.Lk)("h2",null,"高精度测绘与数字孪生"),(0,d.Lk)("p",null,"融合航测影像、多光谱数据与地面传感器，构建农田全要素数字模型。")],-1)),(0,d.Lk)("div",t,[(0,d.Lk)("div",r,[(0,d.Lk)("div",{class:(0,l.C4)(["upload-box",{"is-dragover":D.isDragOver,"has-file":D.fileInfo}]),onClick:e[2]||(e[2]=e=>a.$refs.fileInput.click()),onDragover:e[3]||(e[3]=(0,i.D$)(a=>D.isDragOver=!0,["prevent"])),onDragleave:e[4]||(e[4]=(0,i.D$)(a=>D.isDragOver=!1,["prevent"])),onDrop:e[5]||(e[5]=(0,i.D$)((...a)=>I.handleDrop&&I.handleDrop(...a),["prevent"]))},[(0,d.Lk)("input",{type:"file",ref:"fileInput",accept:".tif,.tiff,.kml,.kmz",onChange:e[0]||(e[0]=(...a)=>I.handleFileChange&&I.handleFileChange(...a)),style:{display:"none"}},null,544),D.fileInfo?((0,d.uX)(),(0,d.CE)("div",o,[e[13]||(e[13]=(0,d.Lk)("div",{class:"file-icon"},[(0,d.Lk)("i",{class:"fa fa-file-contract"})],-1)),(0,d.Lk)("div",v,[(0,d.Lk)("h4",null,(0,l.v_)(D.fileInfo.name),1),(0,d.Lk)("p",null,(0,l.v_)(D.fileInfo.size)+" MB | 类型: 自动识别 (多光谱 TIF)",1)]),(0,d.Lk)("button",{class:"remove-btn",onClick:e[1]||(e[1]=(0,i.D$)((...a)=>I.resetUpload&&I.resetUpload(...a),["stop"]))},[...e[12]||(e[12]=[(0,d.Lk)("i",{class:"fa fa-trash"},null,-1)])])])):((0,d.uX)(),(0,d.CE)("div",c,[...e[11]||(e[11]=[(0,d.Fv)('<i class="fa fa-layer-group" data-v-6495edda></i><p data-v-6495edda>拖拽 TIF/KMZ 文件到此处，或点击上传</p><div class="tags" data-v-6495edda><span class="tag" data-v-6495edda>正射影像</span> <span class="tag" data-v-6495edda>DSM高程</span> <span class="tag" data-v-6495edda>多光谱NDVI</span></div>',3)])]))],34),(0,d.Lk)("button",{class:"process-btn",onClick:e[6]||(e[6]=(...a)=>I.processModel&&I.processModel(...a)),disabled:!D.fileInfo||D.isProcessing},[(0,d.Lk)("i",{class:(0,l.C4)(["fa",D.isProcessing?"fa-spinner fa-spin":"fa-cube"])},null,2),(0,d.eW)(" "+(0,l.v_)(D.isProcessing?"数字模型构建中...":"生成数字孪生模型"),1)],8,p)]),D.modelReady?((0,d.uX)(),(0,d.CE)("div",u,[(0,d.Lk)("div",f,[(0,d.Lk)("aside",h,[e[17]||(e[17]=(0,d.Lk)("h3",null,[(0,d.Lk)("i",{class:"fa fa-database"}),(0,d.eW)(" 数据图层")],-1)),(0,d.Lk)("div",k,[(0,d.Lk)("label",b,[(0,d.bo)((0,d.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=a=>D.visibleLayers.boundary=a)},null,512),[[i.lH,D.visibleLayers.boundary]]),e[14]||(e[14]=(0,d.eW)(" 地块边界 (RTK) ",-1))]),(0,d.Lk)("label",y,[(0,d.bo)((0,d.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>D.visibleLayers.dsm=a)},null,512),[[i.lH,D.visibleLayers.dsm]]),e[15]||(e[15]=(0,d.eW)(" 三维地形 (DSM) ",-1))]),(0,d.Lk)("label",m,[(0,d.bo)((0,d.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=a=>D.visibleLayers.ndvi=a)},null,512),[[i.lH,D.visibleLayers.ndvi]]),e[16]||(e[16]=(0,d.eW)(" 作物长势 (NDVI) ",-1))])]),e[18]||(e[18]=(0,d.Fv)('<div class="sensor-box" data-v-6495edda><h3 data-v-6495edda><i class="fa fa-wifi" data-v-6495edda></i> 地面物联感知</h3><div class="sensor-grid" data-v-6495edda><div class="sensor-item" data-v-6495edda><span class="label" data-v-6495edda>土壤湿度</span><span class="value" data-v-6495edda>24%</span></div><div class="sensor-item" data-v-6495edda><span class="label" data-v-6495edda>空气温度</span><span class="value" data-v-6495edda>28℃</span></div><div class="sensor-item warning" data-v-6495edda><span class="label" data-v-6495edda>风速</span><span class="value" data-v-6495edda>5.2m/s</span><i class="fa fa-exclamation-circle" title="风速偏大" data-v-6495edda></i></div></div></div>',1))]),e[21]||(e[21]=(0,d.Lk)("div",{class:"map-viewport"},[(0,d.Lk)("div",{id:"digitalTwinMap",class:"map-canvas"}),(0,d.Lk)("div",{class:"map-overlay-info"},[(0,d.Lk)("span",null,"面积: 485.2 亩"),(0,d.Lk)("span",null,"平均 NDVI: 0.72")])],-1)),(0,d.Lk)("aside",L,[e[20]||(e[20]=(0,d.Fv)('<div class="panel-header" data-v-6495edda>长势分析与 VRT 处方</div><div class="growth-chart" data-v-6495edda><div class="bar-group" data-v-6495edda><div class="bar-label" data-v-6495edda>优 (30%)</div><div class="bar-track" data-v-6495edda><div class="bar-fill green" style="width:30%;" data-v-6495edda></div></div></div><div class="bar-group" data-v-6495edda><div class="bar-label" data-v-6495edda>中 (50%)</div><div class="bar-track" data-v-6495edda><div class="bar-fill yellow" style="width:50%;" data-v-6495edda></div></div></div><div class="bar-group" data-v-6495edda><div class="bar-label" data-v-6495edda>差 (20%)</div><div class="bar-track" data-v-6495edda><div class="bar-fill red" style="width:20%;" data-v-6495edda></div></div></div></div>',2)),(0,d.Lk)("div",g,[e[19]||(e[19]=(0,d.Fv)('<h4 data-v-6495edda><i class="fa fa-flask" data-v-6495edda></i> 变量追肥建议</h4><div class="rule-item" data-v-6495edda><span class="rule-name" data-v-6495edda>弱势区 (NDVI &lt; 0.4)</span><span class="rule-action" data-v-6495edda>增量 20%</span></div><div class="rule-item" data-v-6495edda><span class="rule-name" data-v-6495edda>强势区 (NDVI &gt; 0.7)</span><span class="rule-action" data-v-6495edda>减量 10%</span></div>',3)),(0,d.Lk)("button",{class:"generate-btn",onClick:e[10]||(e[10]=(...a)=>I.generateTask&&I.generateTask(...a))}," 生成 VRT 航线任务 ")])])])])):(0,d.Q3)("",!0)])])}var D={name:"AIFieldBoundaryAnalysis",data(){return{isDragOver:!1,isProcessing:!1,modelReady:!1,fileInfo:null,mapInstance:null,visibleLayers:{boundary:!0,dsm:!1,ndvi:!0},boundaryPath:[[116.397,39.909],[116.402,39.911],[116.405,39.907],[116.401,39.905]]}},watch:{visibleLayers:{handler(){this.updateMapLayers()},deep:!0}},methods:{handleDrop(a){this.isDragOver=!1;const e=a.dataTransfer.files[0];e&&this.processFileDetails(e)},handleFileChange(a){const e=a.target.files[0];e&&this.processFileDetails(e)},processFileDetails(a){this.fileInfo={name:a.name,size:(a.size/1024/1024).toFixed(2),file:a},this.modelReady=!1},resetUpload(){this.fileInfo=null,this.modelReady=!1},processModel(){this.isProcessing=!0,setTimeout(()=>{this.isProcessing=!1,this.modelReady=!0,this.$nextTick(()=>{this.initMap()})},2e3)},initMap(){window.AMap&&(this.mapInstance=new window.AMap.Map("digitalTwinMap",{center:[116.401,39.908],zoom:15,viewMode:"3D",pitch:50}),this.updateMapLayers())},updateMapLayers(){if(this.mapInstance&&(this.mapInstance.clearMap(),this.visibleLayers.boundary&&new window.AMap.Polygon({path:this.boundaryPath,strokeColor:"#FF33FF",strokeWeight:4,fillColor:"transparent",map:this.mapInstance}),this.visibleLayers.ndvi&&window.AMap.Heatmap)){const a=new window.AMap.Heatmap(this.mapInstance,{radius:30,opacity:[0,.6],gradient:{.4:"red",.6:"yellow",.9:"green"}}),e=this.generateMockPoints();a.setDataSet({data:e,max:100})}},generateMockPoints(){return[{lng:116.401,lat:39.908,count:90},{lng:116.398,lat:39.909,count:40},{lng:116.403,lat:39.906,count:60}]},generateTask(){alert("VRT 航线任务已生成！\n\n已根据 NDVI 差异将地块划分为 3 个作业区，预计节省药液 15%。")}}},I=s(1241);const M=(0,I.A)(D,[["render",w],["__scopeId","data-v-6495edda"]]);var C=M}}]);
//# sourceMappingURL=696.70cd0836.js.map