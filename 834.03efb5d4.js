"use strict";(self["webpackChunkfarmland_drone_dashboard"]=self["webpackChunkfarmland_drone_dashboard"]||[]).push([[834],{655:function(e,t,o){var a=o(6955),l=String;e.exports=function(e){if("Symbol"===a(e))throw new TypeError("Cannot convert a Symbol value to a string");return l(e)}},2812:function(e){var t=TypeError;e.exports=function(e,o){if(e<o)throw new t("Not enough arguments");return e}},4603:function(e,t,o){var a=o(6840),l=o(9504),s=o(655),n=o(2812),r=URLSearchParams,i=r.prototype,d=l(i.append),c=l(i["delete"]),u=l(i.forEach),v=l([].push),h=new r("a=1&a=2&b=3");h["delete"]("a",1),h["delete"]("b",void 0),h+""!=="a=2"&&a(i,"delete",function(e){var t=arguments.length,o=t<2?void 0:arguments[1];if(t&&void 0===o)return c(this,e);var a=[];u(this,function(e,t){v(a,{key:t,value:e})}),n(t,1);var l,r=s(e),i=s(o),h=0,g=0,L=!1,f=a.length;while(h<f)l=a[h++],L||l.key===r?(L=!0,c(this,l.key)):g++;while(g<f)l=a[g++],l.key===r&&l.value===i||d(this,l.key,l.value)},{enumerable:!0,unsafe:!0})},7566:function(e,t,o){var a=o(6840),l=o(9504),s=o(655),n=o(2812),r=URLSearchParams,i=r.prototype,d=l(i.getAll),c=l(i.has),u=new r("a=1");!u.has("a",2)&&u.has("a",void 0)||a(i,"has",function(e){var t=arguments.length,o=t<2?void 0:arguments[1];if(t&&void 0===o)return c(this,e);var a=d(this,e);n(t,1);var l=s(o),r=0;while(r<a.length)if(a[r++]===l)return!0;return!1},{enumerable:!0,unsafe:!0})},8721:function(e,t,o){var a=o(3724),l=o(9504),s=o(2106),n=URLSearchParams.prototype,r=l(n.forEach);a&&!("size"in n)&&s(n,"size",{get:function(){var e=0;return r(this,function(){e++}),e},configurable:!0,enumerable:!0})},8834:function(e,t,o){o.r(t),o.d(t,{default:function(){return S}});var a=o(6768),l=o(5130),s=o(4232);const n={class:"log-viewer-container"},r={class:"log-controls"},i={class:"filter-options"},d={class:"search-options"},c={class:"action-buttons"},u={class:"log-content"},v={class:"log-stats"},h={class:"log-list"},g={key:0,class:"no-logs"},L={class:"log-header"},f={class:"log-level"},p={class:"log-time"},m={class:"log-message"},k={key:0,class:"log-data"};function b(e,t,o,b,y,w){return(0,a.uX)(),(0,a.CE)("div",n,[t[9]||(t[9]=(0,a.Lk)("h1",null,"系统日志",-1)),t[10]||(t[10]=(0,a.Lk)("p",null,"显示系统运行过程中的日志记录",-1)),(0,a.Lk)("div",r,[(0,a.Lk)("div",i,[t[6]||(t[6]=(0,a.Lk)("label",null,"日志级别筛选:",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>y.selectedLevel=e)},[...t[5]||(t[5]=[(0,a.Fv)('<option value="all" data-v-146d37d1>全部</option><option value="DEBUG" data-v-146d37d1>调试</option><option value="INFO" data-v-146d37d1>信息</option><option value="WARN" data-v-146d37d1>警告</option><option value="ERROR" data-v-146d37d1>错误</option>',5)])],512),[[l.u1,y.selectedLevel]])]),(0,a.Lk)("div",d,[t[7]||(t[7]=(0,a.Lk)("label",null,"搜索:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>y.searchTerm=e),placeholder:"搜索日志内容..."},null,512),[[l.Jo,y.searchTerm]])]),(0,a.Lk)("div",c,[(0,a.Lk)("button",{class:"btn-refresh",onClick:t[2]||(t[2]=(...e)=>w.loadLogs&&w.loadLogs(...e))},"刷新"),(0,a.Lk)("button",{class:"btn-clear",onClick:t[3]||(t[3]=(...e)=>w.clearLogs&&w.clearLogs(...e))},"清空日志"),(0,a.Lk)("button",{class:"btn-export",onClick:t[4]||(t[4]=(...e)=>w.exportLogs&&w.exportLogs(...e))},"导出日志")])]),(0,a.Lk)("div",u,[(0,a.Lk)("div",v,[(0,a.Lk)("span",null,"共 "+(0,s.v_)(w.filteredLogs.length)+" 条记录 (总计: "+(0,s.v_)(y.logs.length)+" 条)",1)]),(0,a.Lk)("div",h,[0===w.filteredLogs.length?((0,a.uX)(),(0,a.CE)("div",g," 暂无符合条件的日志记录 ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(w.filteredLogs,(e,o)=>((0,a.uX)(),(0,a.CE)("div",{key:o,class:(0,s.C4)(["log-item",`log-${e.level.toLowerCase()}`])},[(0,a.Lk)("div",L,[(0,a.Lk)("span",f,(0,s.v_)(e.level),1),(0,a.Lk)("span",p,(0,s.v_)(w.formatTime(e.timestamp)),1)]),(0,a.Lk)("div",m,(0,s.v_)(e.message),1),e.data?((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("details",null,[t[8]||(t[8]=(0,a.Lk)("summary",null,"详细信息",-1)),(0,a.Lk)("pre",null,(0,s.v_)(JSON.stringify(e.data,null,2)),1)])])):(0,a.Q3)("",!0)],2))),128))])])])}o(8111),o(2489),o(4603),o(7566),o(8721);var y=o(2398),w={name:"LogViewer",data(){return{logs:[],selectedLevel:"all",searchTerm:""}},computed:{filteredLogs(){let e=[...this.logs];if("all"!==this.selectedLevel&&(e=e.filter(e=>e.level===this.selectedLevel)),this.searchTerm){const t=this.searchTerm.toLowerCase();e=e.filter(e=>e.message.toLowerCase().includes(t)||e.data&&JSON.stringify(e.data).toLowerCase().includes(t))}return e.reverse()}},mounted(){this.loadLogs(),this.refreshInterval=setInterval(()=>{this.loadLogs()},5e3)},beforeUnmount(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{loadLogs(){this.logs=y.A.getLogs()},clearLogs(){confirm("确定要清空所有日志记录吗？")&&(y.A.clearLogs(),this.loadLogs())},formatTime(e){const t=new Date(e);return t.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},exportLogs(){const e=JSON.stringify(this.logs,null,2),t=new Blob([e],{type:"application/json"}),o=URL.createObjectURL(t),a=document.createElement("a");a.href=o,a.download=`logs-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(o)}}},C=o(1241);const E=(0,C.A)(w,[["render",b],["__scopeId","data-v-146d37d1"]]);var S=E}}]);
//# sourceMappingURL=834.03efb5d4.js.map